"use strict";(self.webpackChunkfed_doc=self.webpackChunkfed_doc||[]).push([[67284],{3905:function(n,e,t){t.d(e,{Zo:function(){return c},kt:function(){return d}});var o=t(67294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,o,a=function(n,e){if(null==n)return{};var t,o,a={},i=Object.keys(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var r=o.createContext({}),p=function(n){var e=o.useContext(r),t=e;return n&&(t="function"==typeof n?n(e):s(s({},e),n)),t},c=function(n){var e=p(n.components);return o.createElement(r.Provider,{value:e},n.children)},m={inlineCode:"code",wrapper:function(n){var e=n.children;return o.createElement(o.Fragment,{},e)}},u=o.forwardRef((function(n,e){var t=n.components,a=n.mdxType,i=n.originalType,r=n.parentName,c=l(n,["components","mdxType","originalType","parentName"]),u=p(t),d=a,g=u["".concat(r,".").concat(d)]||u[d]||m[d]||i;return t?o.createElement(g,s(s({ref:e},c),{},{components:t})):o.createElement(g,s({ref:e},c))}));function d(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var i=t.length,s=new Array(i);s[0]=u;var l={};for(var r in e)hasOwnProperty.call(e,r)&&(l[r]=e[r]);l.originalType=n,l.mdxType="string"==typeof n?n:a,s[1]=l;for(var p=2;p<i;p++)s[p]=t[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}u.displayName="MDXCreateElement"},4461:function(n,e,t){t.r(e),t.d(e,{assets:function(){return c},contentTitle:function(){return r},default:function(){return d},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return m}});var o=t(87462),a=t(63366),i=(t(67294),t(3905)),s=["components"],l={},r="Week32-\u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1",p={unversionedId:"\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/\u811a\u624b\u67b6/32\u5468 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1/\u7b14\u8bb0",id:"\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/\u811a\u624b\u67b6/32\u5468 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1/\u7b14\u8bb0",title:"Week32-\u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1",description:"\u7b2c\u4e00\u7ae0 \u5468\u4ecb\u7ecd",source:"@site/docs/19-\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/1-\u811a\u624b\u67b6/32\u5468 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1/101-\u7b14\u8bb0.md",sourceDirName:"19-\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/1-\u811a\u624b\u67b6/32\u5468 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1",slug:"/\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/\u811a\u624b\u67b6/32\u5468 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1/\u7b14\u8bb0",permalink:"/FED-DOC/docs/\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/\u811a\u624b\u67b6/32\u5468 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1/\u7b14\u8bb0",editUrl:"https://github.com/Guing/FED-DOC/docs/19-\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/1-\u811a\u624b\u67b6/32\u5468 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1/101-\u7b14\u8bb0.md",tags:[],version:"current",sidebarPosition:101,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Week31-\u811a\u624b\u67b6\u53d1\u5e03\u6a21\u5757\u4e91\u53d1\u5e03\u529f\u80fd\u5f00\u53d1",permalink:"/FED-DOC/docs/\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/\u811a\u624b\u67b6/31\u5468 \u811a\u624b\u67b6\u53d1\u5e03\u6a21\u5757\u4e91\u53d1\u5e03\u529f\u80fd\u5f00\u53d1/\u7b14\u8bb0"},next:{title:"Week33-\u7ec4\u4ef6\u5e73\u53f0\u5f00\u53d1",permalink:"/FED-DOC/docs/\u4f53\u7cfb/\u6155\u8bfe\u7f51\u524d\u7aef\u67b6\u6784\u5e08/\u811a\u624b\u67b6/33\u5468 \u7ec4\u4ef6\u5e73\u53f0\u5f00\u53d1/\u7b14\u8bb0"}},c={},m=[{value:"\u7b2c\u4e00\u7ae0 \u5468\u4ecb\u7ecd",id:"\u7b2c\u4e00\u7ae0-\u5468\u4ecb\u7ecd",level:3},{value:"1-1 \u6574\u4f53\u5185\u5bb9\u4ecb\u7ecd",id:"1-1-\u6574\u4f53\u5185\u5bb9\u4ecb\u7ecd",level:4},{value:"\u7b2c\u4e8c\u7ae0 \u5927\u5382\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd\u548c\u524d\u7aef\u7ec4\u4ef6\u5e73\u53f0\u67b6\u6784\u8bbe\u8ba1",id:"\u7b2c\u4e8c\u7ae0-\u5927\u5382\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd\u548c\u524d\u7aef\u7ec4\u4ef6\u5e73\u53f0\u67b6\u6784\u8bbe\u8ba1",level:3},{value:"2-1 \u5927\u5382\u524d\u7aef\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd",id:"2-1-\u5927\u5382\u524d\u7aef\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd",level:4},{value:"2-2 \u7ec4\u4ef6\u5e73\u53f0\u67b6\u6784\u8bbe\u8ba1",id:"2-2-\u7ec4\u4ef6\u5e73\u53f0\u67b6\u6784\u8bbe\u8ba1",level:4},{value:"\u7b2c\u4e09\u7ae0 \u811a\u624b\u67b6\u7ec4\u4ef6\u521b\u5efa\u548c\u9884\u89c8\u9879\u76ee\u5f00\u53d1",id:"\u7b2c\u4e09\u7ae0-\u811a\u624b\u67b6\u7ec4\u4ef6\u521b\u5efa\u548c\u9884\u89c8\u9879\u76ee\u5f00\u53d1",level:3},{value:"3-1 \u65b0\u7684\u7ec4\u4ef6\u5e93\u6a21\u677f\u5f00\u53d1",id:"3-1-\u65b0\u7684\u7ec4\u4ef6\u5e93\u6a21\u677f\u5f00\u53d1",level:4},{value:"3-2 \u7ec4\u4ef6\u5e93\u9884\u89c8\u9879\u76ee\u5f00\u53d1",id:"3-2-\u7ec4\u4ef6\u5e93\u9884\u89c8\u9879\u76ee\u5f00\u53d1",level:4},{value:"3-3 \u7ec4\u4ef6\u591a\u9884\u89c8\u6a21\u5f0f\u5f00\u53d1",id:"3-3-\u7ec4\u4ef6\u591a\u9884\u89c8\u6a21\u5f0f\u5f00\u53d1",level:4},{value:"3-4 \u5c06\u9884\u89c8\u529f\u80fd\u96c6\u6210\u5230\u7ec4\u4ef6\u5e93\u6a21\u677f",id:"3-4-\u5c06\u9884\u89c8\u529f\u80fd\u96c6\u6210\u5230\u7ec4\u4ef6\u5e93\u6a21\u677f",level:4},{value:"3-5 \u7ec4\u4ef6\u521d\u59cb\u5316\u65f6\u81ea\u52a8\u751f\u6210\u914d\u7f6e\u6587\u4ef6",id:"3-5-\u7ec4\u4ef6\u521d\u59cb\u5316\u65f6\u81ea\u52a8\u751f\u6210\u914d\u7f6e\u6587\u4ef6",level:4},{value:"3-6 \u7ec4\u4ef6\u5e93\u547d\u540d\u4f18\u5316",id:"3-6-\u7ec4\u4ef6\u5e93\u547d\u540d\u4f18\u5316",level:4},{value:"\u7b2c\u56db\u7ae0 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u6d41\u7a0b\u5f00\u53d1",id:"\u7b2c\u56db\u7ae0-\u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u6d41\u7a0b\u5f00\u53d1",level:3},{value:"4-1 \u7ec4\u4ef6\u4ed3\u5e93\u521d\u59cb\u5316\u6d41\u7a0b\u4f18\u5316",id:"4-1-\u7ec4\u4ef6\u4ed3\u5e93\u521d\u59cb\u5316\u6d41\u7a0b\u4f18\u5316",level:4},{value:"4-2 \u7ec4\u4ef6\u4e0a\u4f20\u524d\u9884\u68c0\u67e5\u6d41\u7a0b\u5f00\u53d1",id:"4-2-\u7ec4\u4ef6\u4e0a\u4f20\u524d\u9884\u68c0\u67e5\u6d41\u7a0b\u5f00\u53d1",level:4},{value:"4-3 \u7ec4\u4ef6\u53d1\u5e03\u524d\u51c6\u5907\u5de5\u4f5c\u5f00\u53d1",id:"4-3-\u7ec4\u4ef6\u53d1\u5e03\u524d\u51c6\u5907\u5de5\u4f5c\u5f00\u53d1",level:4},{value:"4-4 \u521b\u5efaRDS\u7ec4\u4ef6\u8868+\u540e\u7aefMySQL\u63d2\u4ef6\u96c6\u6210",id:"4-4-\u521b\u5efards\u7ec4\u4ef6\u8868\u540e\u7aefmysql\u63d2\u4ef6\u96c6\u6210",level:4},{value:"4-5 \u7ec4\u4ef6\u4e0a\u4f20\u6570\u636e\u5e93\u51c6\u5907\u5de5\u4f5c\u5f00\u53d1",id:"4-5-\u7ec4\u4ef6\u4e0a\u4f20\u6570\u636e\u5e93\u51c6\u5907\u5de5\u4f5c\u5f00\u53d1",level:4},{value:"4-6 \u7ec4\u4ef6\u4e0a\u4f20restful api\u5f00\u53d1",id:"4-6-\u7ec4\u4ef6\u4e0a\u4f20restful-api\u5f00\u53d1",level:4},{value:"4-7 \u7ec4\u4ef6\u4e0a\u4f20\u6570\u636e\u5e93\u903b\u8f91\u5f00\u53d1",id:"4-7-\u7ec4\u4ef6\u4e0a\u4f20\u6570\u636e\u5e93\u903b\u8f91\u5f00\u53d1",level:4},{value:"4-8 \u7ec4\u4ef6NPM\u53d1\u5e03\u903b\u8f91\u5f00\u53d1",id:"4-8-\u7ec4\u4ef6npm\u53d1\u5e03\u903b\u8f91\u5f00\u53d1",level:4},{value:"4-9 \u7ec4\u4ef6\u81ea\u52a8\u751f\u6210\u8fdc\u7a0b\u4ed3\u5e93Tag\u95ee\u9898\u89e3\u51b3",id:"4-9-\u7ec4\u4ef6\u81ea\u52a8\u751f\u6210\u8fdc\u7a0b\u4ed3\u5e93tag\u95ee\u9898\u89e3\u51b3",level:4}],u={toc:m};function d(n){var e=n.components,l=(0,a.Z)(n,s);return(0,i.kt)("wrapper",(0,o.Z)({},u,l,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"week32-\u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1"},"Week32-\u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u529f\u80fd\u5f00\u53d1"),(0,i.kt)("h3",{id:"\u7b2c\u4e00\u7ae0-\u5468\u4ecb\u7ecd"},"\u7b2c\u4e00\u7ae0 \u5468\u4ecb\u7ecd"),(0,i.kt)("hr",null),(0,i.kt)("h4",{id:"1-1-\u6574\u4f53\u5185\u5bb9\u4ecb\u7ecd"},"1-1 \u6574\u4f53\u5185\u5bb9\u4ecb\u7ecd"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u524d\u7aef\u7ec4\u4ef6\u6f14\u8bb2\u8fc7\u7a0b\u548c\u5927\u5382\u524d\u7aef\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd"),(0,i.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u590d\u7528\u4f53\u7cfb\u67b6\u6784\u8bbe\u8ba1"),(0,i.kt)("li",{parentName:"ul"},"\u811a\u624b\u67b6\u7ec4\u4ef6\u521b\u5efa+\u53d1\u5e03\u5168\u6d41\u7a0b\u5b9e\u73b0")),(0,i.kt)("h3",{id:"\u7b2c\u4e8c\u7ae0-\u5927\u5382\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd\u548c\u524d\u7aef\u7ec4\u4ef6\u5e73\u53f0\u67b6\u6784\u8bbe\u8ba1"},"\u7b2c\u4e8c\u7ae0 \u5927\u5382\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd\u548c\u524d\u7aef\u7ec4\u4ef6\u5e73\u53f0\u67b6\u6784\u8bbe\u8ba1"),(0,i.kt)("hr",null),(0,i.kt)("h4",{id:"2-1-\u5927\u5382\u524d\u7aef\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd"},"2-1 \u5927\u5382\u524d\u7aef\u7269\u6599\u4f53\u7cfb\u4ecb\u7ecd"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image-20220518120820499",src:t(30953).Z,width:"505",height:"583"})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image-20220518120842965",src:t(96521).Z,width:"512",height:"464"})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image-20220518120919550",src:t(41313).Z,width:"1156",height:"580"})),(0,i.kt)("h4",{id:"2-2-\u7ec4\u4ef6\u5e73\u53f0\u67b6\u6784\u8bbe\u8ba1"},"2-2 \u7ec4\u4ef6\u5e73\u53f0\u67b6\u6784\u8bbe\u8ba1"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://www.processon.com/embed/612322001efad44bb279c2f2"},"https://www.processon.com/embed/612322001efad44bb279c2f2")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image-20220511172017134",src:t(20155).Z,width:"649",height:"1065"})),(0,i.kt)("h3",{id:"\u7b2c\u4e09\u7ae0-\u811a\u624b\u67b6\u7ec4\u4ef6\u521b\u5efa\u548c\u9884\u89c8\u9879\u76ee\u5f00\u53d1"},"\u7b2c\u4e09\u7ae0 \u811a\u624b\u67b6\u7ec4\u4ef6\u521b\u5efa\u548c\u9884\u89c8\u9879\u76ee\u5f00\u53d1"),(0,i.kt)("hr",null),(0,i.kt)("h4",{id:"3-1-\u65b0\u7684\u7ec4\u4ef6\u5e93\u6a21\u677f\u5f00\u53d1"},"3-1 \u65b0\u7684\u7ec4\u4ef6\u5e93\u6a21\u677f\u5f00\u53d1"),(0,i.kt)("p",null," ",(0,i.kt)("strong",{parentName:"p"},"1. \u53d1\u5e03npm\u5305")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4e0b\u8f7d\u6e90\u81f3\u67d0\u5904\uff1a",(0,i.kt)("a",{parentName:"li",href:"https://git.imooc.com/class-110/lego-bricks"},"https://git.imooc.com/class-110/lego-bricks")),(0,i.kt)("li",{parentName:"ul"},"\u65b0\u5efa\u6587\u4ef6 cloudscope-cli-components"),(0,i.kt)("li",{parentName:"ul"},"cd cloudscope-cli-components"),(0,i.kt)("li",{parentName:"ul"},"npm init -y "),(0,i.kt)("li",{parentName:"ul"},"\u5c06\u6e90\u7801\u79fb\u52a8\u5230  cloudscope-cli-components\u4e0b,\u5e76\u5c06lego-bricks\u6539\u540d\u4e3atemplate"),(0,i.kt)("li",{parentName:"ul"},"cloudscope-cli-components/package.json\u4e0b\uff0c\u6dfb\u52a0publishConfig")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "cloudscope-cli-components",\n  "version": "1.0.2",\n  "description": "",\n  "keywords": [],\n  "author": "",\n  "license": "ISC",\n  "publishConfig": {\n    "access": "public"\n  }\n}\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"cloudscope-cli-components/template/package.json\u4e0b\uff0c\u6dfb\u52a0files")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'"files": [\n    "build",\n    "src",\n    "tests",\n    "dist",\n    ".browserslistrc",\n    ".eslintrc.js",\n    ".gitignore",\n    ".travis.yml",\n    "babel.config.js",\n    "jest.config.js",\n    "README.md",\n    "tsconfig.json"\n  ],\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"npm publish")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"\u7ef4\u62a4mongodb,\u6dfb\u52a0\u4e00\u6761\u6570\u636e"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "_id" : ObjectId("612473d8e1694b2c0191177f"),\n    "name" : "\u901a\u7528\u7684Vue3\u7ec4\u4ef6\u5e93\u6a21\u7248",\n    "npmName" : "cloudscope-cli-components",\n    "version" : "1.0.1",\n    "type" : "normal",\n    "installCommand" : "npm install --registry=https://registry.npm.taobao.org",\n    "startCommand" : "npm run serve",\n    "tag" : [ \n        "component"\n    ],\n    "ignore" : [ \n        "**/public/**", \n        "**.png"\n    ]\n}\n')),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"\u65b0\u5efacomponents-test\u76ee\u5f55"))),(0,i.kt)("p",null,"cloudscope-cli init -tp /Users/liumingzhou/Documents/imoocCourse/Web\u524d\u7aef\u67b6\u6784\u5e08/cloudscope-cli/commands/init"),(0,i.kt)("h4",{id:"3-2-\u7ec4\u4ef6\u5e93\u9884\u89c8\u9879\u76ee\u5f00\u53d1"},"3-2 \u7ec4\u4ef6\u5e93\u9884\u89c8\u9879\u76ee\u5f00\u53d1"),(0,i.kt)("p",null,"\u8fd9\u8282\u542c\u7684\u6709\u70b9\u61f5\u903c\uff0c\u4e0a\u4e00\u8282\uff0c\u901a\u8fc7cloudscope-cli init\u4e86\u4e00\u4e2a\u547d\u4ee4\u540e\uff0c"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"npm run build")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u6839\u76ee\u5f55\u4e0b\u7ee7\u7eed\u65b0\u5efaexamples\u76ee\u5f55,cd examples")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"vue create examples")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"cd examples\u4e2d"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'//main.js\nimport LegoComponents from "../../../dist/component-test.esm";\ncreateApp(App).use(LegoComponents).mount(\'#app\')\n\n//App.vue\n\n<template>\n  <div id="app">\n      <l-image src="https://img.mukewang.com/5d5e51f900011f0c06550501-100-100.jpg"></l-image>\n  </div>\n</template>\n\n//vue.config.js\nmodule.exports = {\n    publicPath:\'./\'\n}\n')),(0,i.kt)("p",null,"\u6700\u540e\u7ee7\u7eed npm run build,\u6253\u5f00dist\u76ee\u5f55\u4e0b\u7684index.html,\u67e5\u770b\u9875\u9762\u6548\u679c"),(0,i.kt)("h4",{id:"3-3-\u7ec4\u4ef6\u591a\u9884\u89c8\u6a21\u5f0f\u5f00\u53d1"},"3-3 \u7ec4\u4ef6\u591a\u9884\u89c8\u6a21\u5f0f\u5f00\u53d1"),(0,i.kt)("p",null,"\u6709\u70b9\u5c0f\u61f5\u903c\uff0c\u7ec4\u4ef6\u5e93\u5c31\u5f00\u53d1\u5b8c\u6bd5\u4e86"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n    publicPath:'./',\n    pages:{\n        index:{\n            entry:'./src/main.js',\n            templates:'./public/index.html'\n        },\n        index2:{\n            entry:'./src/main2.js',\n            templates:'./public/index.html'\n        },\n    }\n}\n")),(0,i.kt)("h4",{id:""}),(0,i.kt)("h4",{id:"3-4-\u5c06\u9884\u89c8\u529f\u80fd\u96c6\u6210\u5230\u7ec4\u4ef6\u5e93\u6a21\u677f"},"3-4 \u5c06\u9884\u89c8\u529f\u80fd\u96c6\u6210\u5230\u7ec4\u4ef6\u5e93\u6a21\u677f"),(0,i.kt)("h4",{id:"3-5-\u7ec4\u4ef6\u521d\u59cb\u5316\u65f6\u81ea\u52a8\u751f\u6210\u914d\u7f6e\u6587\u4ef6"},"3-5 \u7ec4\u4ef6\u521d\u59cb\u5316\u65f6\u81ea\u52a8\u751f\u6210\u914d\u7f6e\u6587\u4ef6"),(0,i.kt)("h4",{id:"3-6-\u7ec4\u4ef6\u5e93\u547d\u540d\u4f18\u5316"},"3-6 \u7ec4\u4ef6\u5e93\u547d\u540d\u4f18\u5316"),(0,i.kt)("h3",{id:"\u7b2c\u56db\u7ae0-\u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u6d41\u7a0b\u5f00\u53d1"},"\u7b2c\u56db\u7ae0 \u811a\u624b\u67b6\u7ec4\u4ef6\u53d1\u5e03\u6d41\u7a0b\u5f00\u53d1"),(0,i.kt)("hr",null),(0,i.kt)("h4",{id:"4-1-\u7ec4\u4ef6\u4ed3\u5e93\u521d\u59cb\u5316\u6d41\u7a0b\u4f18\u5316"},"4-1 \u7ec4\u4ef6\u4ed3\u5e93\u521d\u59cb\u5316\u6d41\u7a0b\u4f18\u5316"),(0,i.kt)("p",null,"cloudscope-cli \u672c\u7ae0\u76f8\u5173\u4ee3\u7801\u63d0\u4ea4\u81f3 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/liugezhou/cloudscope-cli/tree/lesson32"},"cloudscope-cli/lesson32")),(0,i.kt)("p",null,"\u672c\u8282\u4e3b\u8981\u4e3a\u5bf9\u4ed3\u5e93\u540d\u79f0\u5e26\u6709\xb7@\xb7\u8fdb\u884c\u4e00\u4e2a\u5408\u6cd5\u7684\u540d\u5b57\u4fee\u6539"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// cloudscope-cli/models/git/lib/index.js\nclass Git {\n    constructor({name, version, dir},{\n      ^^^^^^^\n      if(name.startsWith('@') && name.indexOf('/')>0){\n            const nameArray = name.split('/')\n            this.name = nameArray.join('_').replace('@','')\n        }else{\n            this.name = name    //\u53d1\u5e03\u9879\u76ee\u540d\u79f0\n        }\n    }\n}\n")),(0,i.kt)("h4",{id:"4-2-\u7ec4\u4ef6\u4e0a\u4f20\u524d\u9884\u68c0\u67e5\u6d41\u7a0b\u5f00\u53d1"},"4-2 \u7ec4\u4ef6\u4e0a\u4f20\u524d\u9884\u68c0\u67e5\u6d41\u7a0b\u5f00\u53d1"),(0,i.kt)("p",null,"cloudscope-cli \u672c\u7ae0\u76f8\u5173\u4ee3\u7801\u63d0\u4ea4\u81f3 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/liugezhou/cloudscope-cli/tree/lesson32"},"cloudscope-cli/lesson32")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// cloudscope-cli/models/git/lib/index.js\nasync prepare(){\n    await this.checkComponent()  // \u7ec4\u4ef6\u5408\u6cd5\u6027\u68c0\u67e5\n}\n async checkComponent(){\n   let componentFile = this.isComponent()\n   if(componentFile){\n     log.info('\u5f00\u59cb\u68c0\u67e5build\u7ed3\u679c')\n     if(!this.buildCmd){\n       this.buildCmd = 'npm run build'\n     }\n     require('child_process').execSync(this.buildCmd,{\n       cwd:this.dir\n     })\n     const buildPath = path.resolve(this.dir,componentFile.buildPath)\n     if(!fs.existsSync(buildPath)){\n       throw new Error(`\u6784\u5efa\u7ed3\u679c\uff1a${buildPath}\u4e0d\u5b58\u5728\uff01`)\n     }\n     const pkg = this.getPackageJson()\n     if(!pkg.files || !pkg.files.includes(componentFile.buildPath)){\n       throw new Error(`packages.json\u4e2dfiles\u5c5e\u6027\u672a\u6dfb\u52a0\u6784\u5efa\u7ed3\u679c\u76ee\u5f55\uff1a[${componentFile.buildPath}],\u8bf7\u5728packag.json\u4e2d\u6536\u5230\u6dfb\u52a0`)\n     }\n     log.success('build\u7ed3\u679c\u68c0\u67e5\u901a\u8fc7\uff01')\n   }\n\n }\n\nisComponent(){\n  const componentFilePath = path.resolve(this.dir,COMPONENT_FILE);\n  return fs.existsSync(componentFilePath) && fse.readJsonSync(componentFilePath)\n}\n")),(0,i.kt)("h4",{id:"4-3-\u7ec4\u4ef6\u53d1\u5e03\u524d\u51c6\u5907\u5de5\u4f5c\u5f00\u53d1"},"4-3 \u7ec4\u4ef6\u53d1\u5e03\u524d\u51c6\u5907\u5de5\u4f5c\u5f00\u53d1"),(0,i.kt)("p",null,"cloudscope-cli \u672c\u7ae0\u76f8\u5173\u4ee3\u7801\u63d0\u4ea4\u81f3 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/liugezhou/cloudscope-cli/tree/lesson32"},"cloudscope-cli/lesson32")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"async publish(){\n  let ret = false;\n  if(this.isComponent()){\n    log.info('\u5f00\u59cb\u53d1\u5e03\u7ec4\u4ef6')\n    await this.saveComponentToDB()\n  }else{\n    \u2026\u2026\u2026\u2026\u2026\u2026\n  }\n  if (this.prod && ret) {\n    await this.uploadComponentToNpm()    \n    this.runCreateTagTask();\n  }\n  \nasync saveComponentToDB(){\n  // \u5c06\u7ec4\u4ef6\u4fe1\u606f\u4e0a\u4f20\u81f3\u6570\u636e\u5e93-RDS\n\n  // \u5c06\u7ec4\u4ef6\u591a\u9884\u89c8\u9875\u9762\u4e0a\u4f20\u81f3OSS\n}\n  async uploadComponentToNpm(){\n    // \u5b8c\u6210\u7ec4\u4ef6\u4e0a\u4f20\u81f3npm\n  }\n")),(0,i.kt)("h4",{id:"4-4-\u521b\u5efards\u7ec4\u4ef6\u8868\u540e\u7aefmysql\u63d2\u4ef6\u96c6\u6210"},"4-4 \u521b\u5efaRDS\u7ec4\u4ef6\u8868+\u540e\u7aefMySQL\u63d2\u4ef6\u96c6\u6210"),(0,i.kt)("p",null,"cloudscope-cli-server \u672c\u7ae0\u76f8\u5173\u4ee3\u7801\u63d0\u4ea4\u81f3 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/liugezhou/cloudscope-cli-server/tree/lesson32"},"cloudscope-cli-server/lesson32")),(0,i.kt)("p",null,"\u672c\u7ae0\u4e3b\u8981\u662f\u5728\u670d\u52a1\u7aef\u94fe\u63a5mysql\u6570\u636e\u5e93\uff0c\u5e76\u505a\u76f8\u5173\u6d4b\u8bd5"),(0,i.kt)("p",null,"\u7f16\u5199\u76f8\u5173\u4ee3\u7801\u524d\uff1acnpm i -S egg-mysql"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// app/config/db.js\nconst MYSQL_HOST = 'liugezhou.com'\nconst MYSQL_PORT = 3306\nconst MYSQL_USER = 'root' \nconst MYSQL_PWD = fs.readFileSync(path.resolve(userHome,'.cloudscope-cli','mysql_pwd')).toString().trim()\nconst MYSQL_DB ='imooc_web_architect_cli'\n\n//app/config/plugin.js\nexports.mysql = {\n  enable:true,\n  package: 'egg-mysql'\n}\n\n//app/config/config.default.js\nconfig.mysql = {\n    client: {\n      host: MYSQL_HOST, \n      port: MYSQL_PORT,\n      user:MYSQL_USER,\n      password:MYSQL_PWD,\n      database:MYSQL_DB\n    },\n    app:true,\n    agent:false\n  }\n\n\n//\u76f8\u5173\u6d4b\u8bd5\u4ee3\u7801\n// app/app/router.js\nrouter.get('/mysql',controller.project.mysqlTest)\n\n// app/controller/project.js\nasync mysqlTest(){\n  const {ctx, app } = this\n  const list = await app.mysql.select('component')\n  ctx.body = JSON.stringify(list)\n}\n")),(0,i.kt)("h4",{id:"4-5-\u7ec4\u4ef6\u4e0a\u4f20\u6570\u636e\u5e93\u51c6\u5907\u5de5\u4f5c\u5f00\u53d1"},"4-5 \u7ec4\u4ef6\u4e0a\u4f20\u6570\u636e\u5e93\u51c6\u5907\u5de5\u4f5c\u5f00\u53d1"),(0,i.kt)("p",null,"cloudscope-cli \u672c\u7ae0\u76f8\u5173\u4ee3\u7801\u63d0\u4ea4\u81f3 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/liugezhou/cloudscope-cli/tree/lesson32"},"cloudscope-cli/lesson32")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// models/git/lib/index.js\nconst ComponentRequest = require('../lib/ComponentRequest');\n async saveComponentToDB(){\n   // \u5c06\u7ec4\u4ef6\u4fe1\u606f\u4e0a\u4f20\u81f3\u6570\u636e\u5e93-RDS\n   log.info('\u4e0a\u4f20\u7ec4\u4ef6\u4fe1\u606f\u81f3OSS+\u5199\u5165\u6570\u636e\u5e93')\n   const componentFile = this.isComponent()\n   let componentExamplePath = path.resolve(this.dir,componentFile.examplePath);\n   let dirs = fs.readdirSync(componentExamplePath)\n   if(dirs.includes('dist')){\n     componentExamplePath = path.resolve(componentExamplePath,'dist')\n     dirs = fs.readdirSync(componentExamplePath)\n     componentFile.examplePath = `${componentFile.examplePath}/dist`\n   }\n   dirs = dirs.filter(dir => dir.match(/^index(\\d)*.html$/))\n   componentFile.exampleList = dirs\n   componentFile.exampleRealPath = componentExamplePath\n   const data = await ComponentRequest.createComponent({\n     component:componentFile,\n     git: {\n       type: this.gitServer.type,\n       remote: this.remote,\n       version: this.version,\n       branch: this.branch,\n       login: this.login,\n       owner: this.owner,\n     },\n   })\n   if (!data) {\n     throw new Error('\u4e0a\u4f20\u7ec4\u4ef6\u5931\u8d25');\n   }\n   // 2.\u5c06\u7ec4\u4ef6\u591a\u9884\u89c8\u9875\u9762\u4e0a\u4f20\u81f3OSS\n   return true;\n }\n\n// models/git/lib/ComponentRequest.js\nconst axios = require('axios');\nconst log = require('@cloudscope-cli/log');\n\nmodule.exports = {\n  createComponent: async function(component) {\n    try {\n      const response = await axios.post('http://liugezhou.com:7001/api/v1/components', component);\n      log.verbose('response', response);\n      const { data } = response;\n      if (data.code === 0) {\n        return data.data;\n      }\n      return null;\n    } catch (e) {\n      throw e;\n    }\n  },\n};\n")),(0,i.kt)("h4",{id:"4-6-\u7ec4\u4ef6\u4e0a\u4f20restful-api\u5f00\u53d1"},"4-6 \u7ec4\u4ef6\u4e0a\u4f20restful api\u5f00\u53d1"),(0,i.kt)("p",null,"cloudscope-cli-server \u672c\u7ae0\u76f8\u5173\u4ee3\u7801\u63d0\u4ea4\u81f3 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/liugezhou/cloudscope-cli-server/tree/lesson32"},"cloudscope-cli-server/lesson32")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// app/constant.js\nmodule.exports = {\n    STATUS: {\n      ON: 1,\n      OFF: 0,\n    },\n}\n\n// app/router.js\nrouter.resources('components', '/api/v1/components', controller.v1.components);\n\n// app/Controller/v1/Components.js\n'use strict'\n\nconst Controller = require(\"egg\").Controller;\nconst constant = require('../../constant');\nconst ComponentService = require('../../service/ComponentService');\n\nclass ComponentsController extends Controller {\n\n    // api/v1/components\n    async index() {\n        const { ctx } = this;\n        ctx.body = 'get component'\n    }\n\n    // api/v1/components/:id\n    async show() {\n        const { ctx } = this;\n        ctx.body = 'get single component'\n    }\n\n    // post data\n    async create() {\n        const { ctx, app } = this;\n        const { component, git } = ctx.request.body;\n        const timestamp = new Date().getTime()\n          // 1. \u6dfb\u52a0\u7ec4\u4ef6\u4fe1\u606f\n        const componentData = {\n            name: component.name,\n            classname: component.className,\n            description: component.description,\n            npm_name: component.npmName,\n            npm_version: component.npmVersion,\n            git_type: git.type,\n            git_remote: git.remote,\n            git_owner: git.owner,\n            git_login: git.login,\n            status: constant.STATUS.ON,\n            create_dt: timestamp,\n            create_by: git.login,\n            update_dt: timestamp,\n            update_by: git.login,\n        };\n        const componentService = new ComponentService(app);\n        ctx.body = 'create component'\n    }\n}\n\nmodule.exports = ComponentsController\n")),(0,i.kt)("h4",{id:"4-7-\u7ec4\u4ef6\u4e0a\u4f20\u6570\u636e\u5e93\u903b\u8f91\u5f00\u53d1"},"4-7 \u7ec4\u4ef6\u4e0a\u4f20\u6570\u636e\u5e93\u903b\u8f91\u5f00\u53d1"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"// app/service/ComponentService.js\n'use strict'\n\nclass ComponentService {\n    constructor(app){\n        this.app = app,\n        this.name = 'component'\n    }\n\n    async queryOne(query){\n        const data = await this.app.mysql.select(this.name, {\n            where: query,\n          });\n          if (data && data.length > 0) {\n            return data[0];\n          }\n          return null;\n    }\n\n    async insert(data) {\n        const res = await this.app.mysql.insert(this.name, data);\n        return res.insertId;\n    }\n}\n\nmodule.exports = ComponentService\n\n//app/service/versionService.js\n'use strict'\n\nclass VersionService {\n    constructor(app) {\n        this.app = app;\n        this.name = 'version'\n    }\n    async queryOne(query) {\n        const data = await this.app.mysql.select(this.name, {\n            where: query,\n        });\n        if (data && data.length > 0) {\n            return data[0];\n        }\n        return null;\n    }\n\n    async insert(data) {\n        const res = await this.app.mysql.insert(this.name, data);\n        if (res.affectedRows > 0) {\n            return true;\n        }\n        return false\n    }\n\n    async update(data, query) {\n        const res = await this.app.mysql.update(this.name, data, {\n            where: query\n        })\n        if (res.affectedRows > 0) {\n            return true;\n        }\n        return false\n    }\n}\n\nmodule.exports = VersionService\n\n//app/controller/v1/Components.js\nasync create() {\n        const { ctx, app } = this;\n        const { component, git } = ctx.request.body;\n        const timestamp = new Date().getTime()\n        // 1. \u6dfb\u52a0\u7ec4\u4ef6\u4fe1\u606f\n        const componentData = {\n            name: component.name,\n            classname: component.className,\n            description: component.description,\n            npm_name: component.npmName,\n            npm_version: component.npmVersion,\n            git_type: git.type,\n            git_remote: git.remote,\n            git_owner: git.owner,\n            git_login: git.login,\n            status: constant.STATUS.ON,\n            create_dt: timestamp,\n            create_by: git.login,\n            update_dt: timestamp,\n            update_by: git.login,\n        };\n        const componentService = new ComponentService(app);\n        const haveComponentInDB = await componentService.queryOne({\n            className: component.className\n        })\n        let componentId;\n        if (!haveComponentInDB) {\n            componentId = await componentService.insert(componentData);\n        } else {\n            componentId = haveComponentInDB.id\n        }\n        if (!componentId) {\n            ctx.body = failed('\u6dfb\u52a0\u7ec4\u4ef6\u5931\u8d25')\n        }\n        // 2.\u6dfb\u52a0\u7ec4\u4ef6\u7248\u672c\u4fe1\u606f\n        const versionData = {\n            component_id: componentId,\n            version: git.version,\n            build_path: component.buildPath,\n            example_path: component.examplePath,\n            example_list: JSON.stringify(component.exampleList),\n            status: constant.STATUS.ON,\n            create_dt: timestamp,\n            create_by: git.login,\n            update_dt: timestamp,\n            update_by: git.login,\n        }\n        const versionService = new VersionService(app);\n        const haveVersionInDB = await versionService.queryOne({\n            component_id: componentId,\n            version: git.version\n        });\n        if (!haveVersionInDB) {\n            const versionRes = await versionService.insert(versionData)\n            if (!versionRes) {\n                ctx.body = failed('\u6dfb\u52a0\u7ec4\u4ef6\u5931\u8d25')\n            }\n        } else {\n            const updateData = {\n                build_path: component.buildPath,\n                example_path: component.examplePath,\n                example_list: JSON.stringify(component.exampleList),\n                update_dt: timestamp,\n                update_by: git.login,\n            };\n            const versionRes = await versionService.update(updateData, {\n                component_id: componentId,\n                version: versionData.version,\n            });\n            if (!versionRes) {\n                ctx.body = failed('\u66f4\u65b0\u7ec4\u4ef6\u5931\u8d25');\n                return;\n            }\n        }\n\n    }\n")),(0,i.kt)("h4",{id:"4-8-\u7ec4\u4ef6npm\u53d1\u5e03\u903b\u8f91\u5f00\u53d1"},"4-8 \u7ec4\u4ef6NPM\u53d1\u5e03\u903b\u8f91\u5f00\u53d1"),(0,i.kt)("p",null,"\u672c\u8282\u4e3b\u8981\u662f\u8c03\u8bd5\u8fc7\u591a\uff0c\u91cd\u8981\u51e0\u884c\u4ee3\u7801\u4e3a\u5728\u811a\u624b\u67b6 cloudscope-cli\u4e2d\u6dfb\u52a0NPM\u53d1\u5e03\u903b\u8f91"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"async uploadComponentToNpm() {\n  // \u5b8c\u6210\u7ec4\u4ef6\u4e0a\u4f20\u81f3npm\n  if (this.isComponent()) {\n    log.info('\u5f00\u59cb\u53d1\u5e03\u7ec4\u4ef6NPM')\n    require('child_process').execSync('npm publish', {\n      cwd: this.dir\n    })\n    log.success('\u7ec4\u4ef6NPM\u53d1\u5e03\u6210\u529f')\n  }\n}\n")),(0,i.kt)("h4",{id:"4-9-\u7ec4\u4ef6\u81ea\u52a8\u751f\u6210\u8fdc\u7a0b\u4ed3\u5e93tag\u95ee\u9898\u89e3\u51b3"},"4-9 \u7ec4\u4ef6\u81ea\u52a8\u751f\u6210\u8fdc\u7a0b\u4ed3\u5e93Tag\u95ee\u9898\u89e3\u51b3"))}d.isMDXComponent=!0},20155:function(n,e,t){e.Z=t.p+"assets/images/image-20220511172017134-d51364c53e037cadd917baf7f934f585.png"},30953:function(n,e,t){e.Z=t.p+"assets/images/image-20220518120820499-b46e60820b559ae8e67c06de7d084efb.png"},96521:function(n,e,t){e.Z=t.p+"assets/images/image-20220518120842965-968e789dac8098b7983fe9c4dc5346c5.png"},41313:function(n,e,t){e.Z=t.p+"assets/images/image-20220518120919550-156362513656028524575fd3809aae1f.png"}}]);