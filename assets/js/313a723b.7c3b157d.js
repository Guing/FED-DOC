"use strict";(self.webpackChunkfed_doc=self.webpackChunkfed_doc||[]).push([[81665],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=a.createContext({}),p=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(c.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=p(t),d=r,k=m["".concat(c,".").concat(d)]||m[d]||s[d]||l;return t?a.createElement(k,i(i({ref:n},u),{},{components:t})):a.createElement(k,i({ref:n},u))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=m;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=t[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},70043:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return s}});var a=t(87462),r=t(63366),l=(t(67294),t(3905)),i=["components"],o={},c=void 0,p={unversionedId:"\u5de5\u7a0b\u5316/\u4f7f\u7528verdaccio\u642d\u5efa\u79c1\u6709npm\u4ed3\u5e93",id:"\u5de5\u7a0b\u5316/\u4f7f\u7528verdaccio\u642d\u5efa\u79c1\u6709npm\u4ed3\u5e93",title:"\u4f7f\u7528verdaccio\u642d\u5efa\u79c1\u6709npm\u4ed3\u5e93",description:"\u4ecb\u7ecd",source:"@site/docs/13-\u5de5\u7a0b\u5316/\u4f7f\u7528verdaccio\u642d\u5efa\u79c1\u6709npm\u4ed3\u5e93.md",sourceDirName:"13-\u5de5\u7a0b\u5316",slug:"/\u5de5\u7a0b\u5316/\u4f7f\u7528verdaccio\u642d\u5efa\u79c1\u6709npm\u4ed3\u5e93",permalink:"/FED-DOC/docs/\u5de5\u7a0b\u5316/\u4f7f\u7528verdaccio\u642d\u5efa\u79c1\u6709npm\u4ed3\u5e93",editUrl:"https://github.com/Guing/FED-DOC/docs/13-\u5de5\u7a0b\u5316/\u4f7f\u7528verdaccio\u642d\u5efa\u79c1\u6709npm\u4ed3\u5e93.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"intro",permalink:"/FED-DOC/docs/\u5de5\u7a0b\u5316/intro"},next:{title:"intro",permalink:"/FED-DOC/docs/\u5355\u5143\u6d4b\u8bd5/intro"}},u={},s=[{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u8fd0\u884c",id:"\u8fd0\u884c",level:2},{value:"\u6ce8\u610f",id:"\u6ce8\u610f",level:3},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u4f7f\u7528nrm",id:"\u4f7f\u7528nrm",level:3},{value:"\u767b\u5f55\u79c1\u6709\u6e90",id:"\u767b\u5f55\u79c1\u6709\u6e90",level:3},{value:"\u53d1\u5e03\u5305",id:"\u53d1\u5e03\u5305",level:3},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:3},{value:"\u6743\u9650\u914d\u7f6e",id:"\u6743\u9650\u914d\u7f6e",level:3},{value:"\u5b9e\u9645\u7684\u6743\u9650\u914d\u7f6e\u573a\u666f",id:"\u5b9e\u9645\u7684\u6743\u9650\u914d\u7f6e\u573a\u666f",level:4}],m={toc:s};function d(e){var n=e.components,t=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\u4ecb\u7ecd"},"\u4ecb\u7ecd"),(0,l.kt)("p",null,"verdaccio\u662f\u4e00\u6b3e\u5f00\u6e90\u8f7b\u91cf\u7ea7\u7684\u79c1\u6709Npm\u6e90\u5de5\u5177\uff0c\u7b80\u5355\u6765\u8bf4\u4f60\u53ef\u4ee5\u7528\u5b83\u6765\u642d\u5efa\u4e00\u4e2a\u81ea\u5df1\u7684Npm\u4ed3\u5e93\uff0c\u53ef\u4ee5\u5b9e\u73b0\u7edd\u5927\u90e8\u5206Npm\u6240\u63d0\u4f9b\u7684\u80fd\u529b\uff0c",(0,l.kt)("a",{parentName:"p",href:"https://verdaccio.org/"},"\u5b98\u65b9\u7f51\u7ad9"),"\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e0e yarn, npm \u548c pnpm 100% \u517c\u5bb9"),(0,l.kt)("li",{parentName:"ul"},"\u63d0\u4f9b Docker \u548c Kubernetes \u652f\u6301\uff0c\u76f8\u5f53\u5bb9\u6613\u5b89\u88c5\u548c\u4f7f\u7528"),(0,l.kt)("li",{parentName:"ul"},"\u53d1\u5e03\u7684\u5305\u662f\u79c1\u6709\u7684\u5e76\u4e14\u8bbf\u95ee\u6743\u9650\u53ef\u914d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},"Verdaccio \u6309\u9700\u8981\u7f13\u5b58\u6240\u6709\u76f8\u5173\u9879\uff0c\u5e76\u5728\u5f53\u5730\u6216\u79c1\u6709\u7f51\u7edc\u4e0b\u53ef\u4ee5\u52a0\u901f\u5b89\u88c5")),(0,l.kt)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,l.kt)("p",null,"\u5b98\u7f51\u6709\u8be6\u7ec6\u7684",(0,l.kt)("a",{parentName:"p",href:"https://verdaccio.org/docs/en/installation"},"\u5b89\u88c5\u6559\u7a0b"),"\u3002\u7b14\u8005\u4f7f\u7528\u7684\u662flinux\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u6709\u5b89\u88c5docker\u5bb9\u5668\uff0c\u6240\u4ee5\u8fd9\u91cc\u4f7f\u7528docker\u5b89\u88c5Verdaccio\uff0c\u7b80\u5355\u5feb\u6377\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"docker pull verdaccio/verdaccio\n")),(0,l.kt)("h2",{id:"\u8fd0\u884c"},"\u8fd0\u884c"),(0,l.kt)("p",null,"\u4f7f\u7528docker\u8fd0\u884cVerdaccio\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -it --rm --name verdaccio -p 4873:4873 verdaccio/verdaccio\n")),(0,l.kt)("p",null,"\u6216\u8005\u4f7f\u7528-v\u6302\u8f7d\u672c\u5730\u6570\u636e\u5377\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -it --rm --name verdaccio \\\n  -p 4873:4873 \\\n  -v /data/verdaccio/conf:/verdaccio/conf \\\n  -v /data/verdaccio/storage:/verdaccio/storage \\\n  -v /data/verdaccio/plugins:/verdaccio/plugins \\\n  verdaccio/verdaccio\n")),(0,l.kt)("h3",{id:"\u6ce8\u610f"},"\u6ce8\u610f"),(0,l.kt)("p",null,"\u5728\u5b98\u65b9\u63d0\u793a\u4e2d\uff0c\u5efa\u8bae\u4f7f\u7528docker volume\u800c\u4e0d\u662f bind mount\uff1a"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Verdaccio \u5728\u5bb9\u5668\u5185\u4ee5\u975eroot\u7528\u6237\uff08uid=10001\uff09\u8fd0\u884c\uff0c\u5982\u679c\u4f7f\u7528\u7ed1\u5b9a\u6302\u8f7d\u8986\u76d6\u9ed8\u8ba4\u503c\uff0c\u5219\u9700\u8981\u786e\u4fdd\u6302\u8f7d\u76ee\u5f55\u5206\u914d\u7ed9\u6b63\u786e\u7684\u7528\u6237\u3002\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u4f60\u9700\u8981\u8fd0\u884c sudo chown -R 10001:65533 /path/for/verdaccio \u5426\u5219\u4f60\u4f1a\u5728\u8fd0\u884c\u65f6\u51fa\u73b0\u6743\u9650\u9519\u8bef\u3002\u5efa\u8bae\u4f7f\u7528docker volume\u800c\u975e\u4f7f\u7528 bind mount\u3002")),(0,l.kt)("p",null,"\u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u7b14\u8005\u4f7f\u7528docker volume\uff0c\u5c06/verdaccio/conf, /verdaccio/storage, /verdaccio/plugins\u6302\u8f7d\u5230\u4e3b\u673a\u7684\u540c\u4e00\u6570\u636e\u5377\u4e0b\u65f6\uff0c\u4f1a\u62a5\u8fd9\u4e2a\u9519\u8bef\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"Error: EACCES: permission denied, open '/verdaccio/conf/htpasswd'\n")),(0,l.kt)("p",null,"\u89e3\u51b3\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u5c06\u8fd9\u4e09\u4e2a\u76ee\u5f55\u6302\u8f7d\u5230\u4e0d\u540c\u7684\u6570\u636e\u5377\u4e2d\uff0c\u9519\u8bef\u5c31\u4f1a\u89e3\u51b3\u3002"),(0,l.kt)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,l.kt)("h3",{id:"\u4f7f\u7528nrm"},"\u4f7f\u7528nrm"),(0,l.kt)("p",null,"nrm \u662f\u4e00\u4e2a NPM \u6e90\u7ba1\u7406\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528 nrm \u5728\u4e0d\u540c\u7684\u6e90\u5207\u6362\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5nrm")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm i nrm -g\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u67e5\u770bnrm \u6e90")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"nrm ls\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"  npm -------- https://registry.npmjs.org/\n  yarn ------- https://registry.yarnpkg.com/\n  cnpm ------- http://r.cnpmjs.org/\n  taobao ----- https://registry.npm.taobao.org/\n  nj --------- https://registry.nodejitsu.com/\n  npmMirror -- https://skimdb.npmjs.com/registry/\n  edunpm ----- http://registry.enpmjs.org/\n\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6dfb\u52a0\u6216\u5220\u9664\u79c1\u6709\u6e90")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"nrm add registry_name registry_url #\u6dfb\u52a0\u6e90\uff0cregistry_name\u4e3a\u6e90\u7684\u540d\u79f0\uff0cregistry_url\u4e3a\u6e90\u7684\u5730\u5740\nnrm del registry_name #\u5220\u9664\u6e90\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u79c1\u6709\u6e90")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"nrm use registry_name\n")),(0,l.kt)("h3",{id:"\u767b\u5f55\u79c1\u6709\u6e90"},"\u767b\u5f55\u79c1\u6709\u6e90"),(0,l.kt)("p",null,"\u518d\u4f7f\u7528nrm\u5207\u6362\u5230\u79c1\u6709\u6e90\u4e4b\u540e\uff0c\u4f7f\u7528npm login\u767b\u5f55\u79c1\u6709\u6e90, \u8f93\u5165\u8d26\u53f7\uff0c\u5bc6\u7801\uff0c\u90ae\u7bb1\uff0c\u5c31\u53ef\u4ee5\u767b\u5f55\u6210\u529f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"nrm use registry_name\nnpm login\n")),(0,l.kt)("h3",{id:"\u53d1\u5e03\u5305"},"\u53d1\u5e03\u5305"),(0,l.kt)("p",null,"\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u6267\u884cnpm publish\u5c31\u53ef\u4ee5\u5c06\u5305\u53d1\u5e03\u5230\u79c1\u6709\u6e90"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm publish\n")),(0,l.kt)("h3",{id:"\u914d\u7f6e"},"\u914d\u7f6e"),(0,l.kt)("p",null,"\u5728/verdaccio/conf\u4e2d\u6709\u4e00\u4e2aconfig.yaml, \u53ef\u4ee5\u505a\u76f8\u5e94\u7684\u914d\u7f6e\u3002\u5982\u679c\u4f7f\u7528docker\u6570\u636e\u5377\u6302\u8f7d\uff0c\u5219\u5728\u6570\u636e\u5377\u76ee\u5f55\u4e2d\u4e5f\u4f1a\u6709\u76f8\u5e94\u7684config.yaml\uff0c\u6bd4\u5982\u4ee5\u4e0a\u5b89\u88c5\u793a\u4f8b\u4e2d\uff0cconfig.yaml\u5c31\u4f1a\u51fa\u73b0\u5728\u4e3b\u673a\u7684/data/verdaccio/conf\u76ee\u5f55\u4e2d\u3002"),(0,l.kt)("p",null,"\u914d\u7f6e\u6587\u4ef6\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"\n# \u5305\u542b\u6240\u6709\u5305\u7684\u76ee\u5f55\u7684\u8def\u5f84\nstorage: /verdaccio/storage/data\n# \u5305\u542b\u6240\u6709\u5305\u7684\u63d2\u4ef6\u7684\u8def\u5f84\nplugins: /verdaccio/plugins\n#\u663e\u793a\u7684\u7f51\u9875\u914d\u7f6e\nweb:\n  # WebUI \u9ed8\u8ba4\u542f\u7528\uff0c\u5982\u679c\u4f60\u60f3\u7981\u7528\u5b83\uff0c\u53ea\u9700\u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e00\u884c\n  #enable: false\n  title: Verdaccio\n  # \u7981\u7528 gravatar \u652f\u6301\n  # gravatar: false\n  # \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5305\u662f\u7684\u6392\u5e8f\u662f\u4e0a\u5347\u7684 (asc|desc)\n  # sort_packages: asc\n  # darkMode: true\n  # logo: http://somedomain/somelogo.png\n  # favicon: http://somedomain/favicon.ico | /path/favicon.ico\n\n# \u591a\u8bed\u8a00\u652f\u6301\n# i18n:\n#  \u652f\u6301\u7684\u8bed\u8a00\u5217\u8868\u5728\uff1a https://github.com/verdaccio/ui/tree/master/i18n/translations\n#   web: en-US\n\nauth:\n  htpasswd:\n    file: /verdaccio/storage/htpasswd\n    # \u5141\u8bb8\u6ce8\u518c\u7684\u6700\u5927\u7528\u6237\u6570\uff0c\u9ed8\u8ba4\u4e3a \"+infinity\".\u53ef\u4ee5\u8bbe\u7f6e-1\u7981\u6b62\u6ce8\u518c\u7528\u6237\u3002\n    # max_users: 1000\n\n# \u4e0a\u6e38\u670d\u52a1\u5668\uff0c\u8868\u793a\u5982\u679c\u4f60\u7684\u5e93\u4e2d\u6ca1\u6709\u6b64\u6587\u4ef6\uff0c\u53ef\u4ee5\u53bb\u5176\u4ed6\u4e0a\u6e38\u670d\u52a1\u5668\u62c9\u53d6\nuplinks:\n  npmjs:\n    url: https://registry.npmjs.org/\n    # \u8868\u793a\u662f\u5426\u5f00\u542f\u7f13\u5b58\n    cache:true\n    # \u8868\u793a\u7f13\u5b58\u591a\u4e45\u540e\u5931\u6548\n    maxage:10m\n\npackages:\n # \u4f5c\u7528\u57df\u5305\n  '@*/*':\n    # \u8868\u793a\u54ea\u4e00\u7c7b\u7528\u6237\u53ef\u4ee5\u5bf9\u5339\u914d\u7684\u9879\u76ee\u8fdb\u884c\u5b89\u88c5\n    # \u53ef\u4ee5\u4f7f\u7528\u4e09\u4e2a\u5173\u952e\u5b57\uff1a\u201c$all\u201d\u3001\u201c$anonymous\u201d\u3001\u201c$authenticated\u201d\n    # \u4e5f\u53ef\u4ee5\u6307\u5b9a\u7528\u6237\u540d/\u7ec4\u540d\uff08\u53d6\u51b3\u4e8e\u4e0a\u9762\u4f7f\u7528\u7684\u8eab\u4efd\u9a8c\u8bc1\u63d2\u4ef6,htpasswd\uff09\n    access: $all\n    # \u8868\u793a\u54ea\u4e00\u7c7b\u7528\u6237\u53ef\u4ee5\u5bf9\u5339\u914d\u7684\u9879\u76ee\u8fdb\u884c\u53d1\u5e03\n    publish: $authenticated\n    # \u8868\u793a\u54ea\u4e00\u7c7b\u7528\u6237\u53ef\u4ee5\u5bf9\u5339\u914d\u7684\u9879\u76ee\u8fdb\u884c\u5378\u8f7d\u5305\n    unpublish: $authenticated\n    # \u8868\u793a\u5982\u679c\u5e93\u4e2d\u6ca1\u6709\u6b64\u5305\uff0c\u6b64\u80fd\u8fc7\u4e0a\u9762\u914d\u7f6e\u7684npmjs\u53bb\u83b7\u53d6\n    proxy: npmjs\n # \u5176\u4ed6\u6240\u6709\u5305\n  '**':\n    access: $all\n    publish: $authenticated\n    unpublish: $authenticated\n    proxy: npmjs\n\n# \u53ef\u4ee5\u4e3a\u4f20\u5165\u8fde\u63a5\u6307\u5b9a HTTP/1.1 \u670d\u52a1\u5668\u4fdd\u6301\u6d3b\u52a8\u8d85\u65f6\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\n# \u503c\u4e3a 0 \u4f7f http \u670d\u52a1\u5668\u7684\u884c\u4e3a\u7c7b\u4f3c\u4e8e 8.0.0 \u4e4b\u524d\u7684 Node.js \u7248\u672c\uff0c\u540e\u8005\u6ca1\u6709\u4fdd\u6301\u6d3b\u52a8\u8d85\u65f6\n# \u89e3\u51b3\u65b9\u6cd5\uff1a\u901a\u8fc7\u7ed9\u5b9a\u7684\u914d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u89e3\u51b3\u4ee5\u4e0b\u95ee\u9898 https://github.com/verdaccio/verdaccio/issues/301\u3002 \u5982\u679c 60 \u4e0d\u591f\uff0c\u5219\u8bbe\u7f6e\u4e3a 0\u3002\nserver:\n  keepAliveTimeout: 60\n\nmiddlewares:\n  audit:\n    enabled: true\n\n# \u65e5\u5fd7\u8bbe\u7f6e\nlogs: { type: stdout, format: pretty, level: http }\n\n#\u73af\u5883\u914d\u7f6e\n#experiments:\n#  # \u652f\u6301 npm token \u6307\u4ee4\n#  token: false\n#  # \u542f\u7528 tarball URL \u91cd\u5b9a\u5411\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u670d\u52a1\u5668\u6258\u7ba1 tarball\uff0ctarball_url_redirect \u53ef\u4ee5\u662f\u6a21\u677f\u5b57\u7b26\u4e32\n#  tarball_url_redirect: 'https://mycdn.com/verdaccio/${packageName}/${filename}'\n#  # \u5f53\u4f7f\u7528 js \u914d\u7f6e\u6587\u4ef6\u65f6\uff0ctarball_url_redirect \u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u63a5\u53d7 packageName \u548c filename \u5e76\u8fd4\u56de url\n#  tarball_url_redirect(packageName, filename) {\n#    const signedUrl = // generate a signed url\n#    return signedUrl;\n#  }\n\n# \u8fd9\u4f1a\u5f71\u54cd web \u548c api\uff08\u5c1a\u672a\u5f00\u53d1\uff09\n#i18n:\n#web: en-US\n")),(0,l.kt)("h3",{id:"\u6743\u9650\u914d\u7f6e"},"\u6743\u9650\u914d\u7f6e"),(0,l.kt)("p",null,"\u4e00\u822c\u56e2\u961f\u6216\u8005\u516c\u53f8\u7684\u79c1\u6709\u9879\u76ee\uff0c\u4f1a\u91c7\u7528\u4e0d\u540c\u7684\u6743\u9650\u63a7\u5236\uff0c\u914d\u7f6e\u6587\u4ef6\u7684packages\u662f\u914d\u7f6e\u5305\u7684\u6743\u9650\u7684\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5339\u914d\u5305\u540d",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"'@",(0,l.kt)("em",{parentName:"li"},"/"),"' \u8868\u793a\u5e26\u6709@",(0,l.kt)("em",{parentName:"li"},"/"),"\u7684\u4f5c\u7528\u57df\u5305"),(0,l.kt)("li",{parentName:"ul"},"** \u8868\u793a\u5176\u4ed6\u7684\u6240\u6709\u5305"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u914d\u7f6e\u81ea\u5df1\u7684\u5305\u6bd4\u5982\uff1a'private-",(0,l.kt)("em",{parentName:"li"},"', 'my-"),"'\u7b49\u7b49"))),(0,l.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u6743\u9650\uff1a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"access \u8868\u793a\u54ea\u4e00\u7c7b\u7528\u6237\u53ef\u4ee5\u5bf9\u5339\u914d\u7684\u9879\u76ee\u8fdb\u884c\u5b89\u88c5(install)"),(0,l.kt)("li",{parentName:"ul"},"publish \u8868\u793a\u54ea\u4e00\u7c7b\u7528\u6237\u53ef\u4ee5\u5bf9\u5339\u914d\u7684\u9879\u76ee\u8fdb\u884c\u53d1\u5e03(publish) "),(0,l.kt)("li",{parentName:"ul"},"proxy \u8868\u793a\u5982\u679c\u5e93\u4e2d\u6ca1\u6709\u6b64\u5305\uff0c\u6b64\u80fd\u8fc7\u4e0a\u9762\u914d\u7f6e\u7684npmjs\u53bb\u83b7\u53d6"))),(0,l.kt)("li",{parentName:"ul"},"\u7528\u6237\u6743\u9650\uff1a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"$all \u8868\u793a\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u6267\u884c\u5bf9\u5e94\u7684\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"$authenticated \u8868\u793a\u53ea\u6709\u901a\u8fc7\u9a8c\u8bc1\u7684\u4eba\u53ef\u4ee5\u6267\u884c\u5bf9\u5e94\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"$anonymous \u8868\u793a\u53ea\u6709\u533f\u540d\u8005\u53ef\u4ee5\u8fdb\u884c\u5bf9\u5e94\u64cd\u4f5c\uff08\u901a\u5e38\u65e0\u7528\uff09"),(0,l.kt)("li",{parentName:"ul"},"\u8fd9\u91cc\u53ef\u4ee5\u5199\u5df2\u7ecf\u6ce8\u518c\u7684\u7528\u6237\u540d\uff0c\u505a\u5230\u7cbe\u7ec6\u5316\u63a7\u5236")))),(0,l.kt)("h4",{id:"\u5b9e\u9645\u7684\u6743\u9650\u914d\u7f6e\u573a\u666f"},"\u5b9e\u9645\u7684\u6743\u9650\u914d\u7f6e\u573a\u666f"),(0,l.kt)("p",null,"\u516c\u53f8\u91cc\u6709\u4e24\u4e2a\u524d\u7aef\u56e2\u961fteamA\u548cteamB\uff0c\u79c1\u6709\u6e90\u4e0a\u7684\u6240\u6709\u5305\u90fd\u53ef\u4ee5\u5b89\u88c5\uff0c\u4f46\u662f\u6bcf\u4e2a\u56e2\u961f\u53ea\u80fd\u53d1\u5e03\u6216\u79fb\u9664\u81ea\u5df1\u56e2\u961f\u7684\u5305\u3002\u5219\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u914d\u7f6e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"\npackages:\n # teamA\n  '@teamA/*':\n    access: $all\n    publish: teamA-user1 teamA-user2 teamA-user3 \n    unpublish: teamA-user1 teamA-user2 teamA-user3\n    proxy: npmjs\n  # teamB\n  '@teamB/*':\n    access: $all\n    publish: teamB-user1 teamB-user2 teamB-user3 \n    unpublish: teamB-user1 teamB-user2 teamB-user3\n    proxy: npmjs\n  # \u5176\u4ed6\u6240\u6709\u5305\n  '**':\n    access: $all\n    publish: $authenticated\n    unpublish: $authenticated\n    proxy: npmjs\n")),(0,l.kt)("p",null,"\u56e0\u4e3a\u662f\u79c1\u6709\u6e90\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e config.yaml \u4e2d\u7684 max_users: -1 \u6765\u7981\u7528 npm adduser \u547d\u4ee4\u6765\u521b\u5efa\u7528\u6237\u3002\u5982\u679c\u9700\u8981\u6dfb\u52a0\u7528\u6237\u8fd9\u91cc\u4ecb\u7ecd\u4e24\u79cd\u65b9\u6cd5\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5 htpasswd-for-sinopia \u6765\u6dfb\u52a0\u8d26\u53f7")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install htpasswd-for-sinopia -g #\u5168\u5c40\u5b89\u88c5htpasswd-for-sinopia\nsinopia-adduser # \u5728 htpasswd \u76ee\u5f55\u4e0b\u6267\u884c\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u901a\u8fc7\u5b98\u65b9\u63d0\u4f9b\u7684\u5de5\u5177\u6765\u751f\u6210\n",(0,l.kt)("a",{parentName:"li",href:"https://hostingcanada.org/htpasswd-generator/"},"htpasswd-generator"),"\n\uff0c\u5c06\u751f\u6210\u7684\u6bb5\u5b57\u7b26\u4e32\u6dfb\u52a0\u5230 htpasswd \u4e2d\u5373\u53ef\u3002")))}d.isMDXComponent=!0}}]);