"use strict";(self.webpackChunkfed_doc=self.webpackChunkfed_doc||[]).push([[1035],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return s}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),u=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=u(e.components);return r.createElement(p.Provider,{value:n},e.children)},k={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=u(t),s=a,m=c["".concat(p,".").concat(s)]||c[s]||k[s]||l;return t?r.createElement(m,o(o({ref:n},d),{},{components:t})):r.createElement(m,o({ref:n},d))}));function s(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,o=new Array(l);o[0]=c;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var u=2;u<l;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},9789:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return p},default:function(){return s},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return k}});var r=t(87462),a=t(63366),l=(t(67294),t(3905)),o=["components"],i={},p="IndexedDB\u4f7f\u7528\u4e0e\u51fa\u5751\u6307\u5357",u={unversionedId:"\u6d4f\u89c8\u5668/IndexedDB\u6570\u636e\u5e93/IndexedDB\u4f7f\u7528",id:"\u6d4f\u89c8\u5668/IndexedDB\u6570\u636e\u5e93/IndexedDB\u4f7f\u7528",title:"IndexedDB\u4f7f\u7528\u4e0e\u51fa\u5751\u6307\u5357",description:"\u672c\u6587\u901a\u8fc7\u5bf9IndexedDB\u7684\u4f7f\u7528\u65b9\u6cd5\u548c\u4f7f\u7528\u573a\u666f\u8fdb\u884c\u76f8\u5173\u4ecb\u7ecd\uff0c\u5bf9\u5e38\u89c1\u7684\u95ee\u9898\u8fdb\u884c\u89e3\u7b54\u3002",source:"@site/docs/10-\u6d4f\u89c8\u5668/IndexedDB\u6570\u636e\u5e93/IndexedDB\u4f7f\u7528.md",sourceDirName:"10-\u6d4f\u89c8\u5668/IndexedDB\u6570\u636e\u5e93",slug:"/\u6d4f\u89c8\u5668/IndexedDB\u6570\u636e\u5e93/IndexedDB\u4f7f\u7528",permalink:"/FED-DOC/docs/\u6d4f\u89c8\u5668/IndexedDB\u6570\u636e\u5e93/IndexedDB\u4f7f\u7528",editUrl:"https://github.com/Guing/FED-DOC/docs/10-\u6d4f\u89c8\u5668/IndexedDB\u6570\u636e\u5e93/IndexedDB\u4f7f\u7528.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u603b\u7ed3",permalink:"/FED-DOC/docs/\u5c0f\u7a0b\u5e8f/\u5c0f\u7a0b\u5e8f\u6027\u80fd\u4f18\u5316\u5b9e\u8df5/\u603b\u7ed3"},next:{title:"vue-cli\u4f18\u5316",permalink:"/FED-DOC/docs/\u6027\u80fd\u4f18\u5316/vue-cli\u4f18\u5316"}},d={},k=[{value:"\u6570\u636e\u5e93\u64cd\u4f5c",id:"\u6570\u636e\u5e93\u64cd\u4f5c",level:2},{value:"\u521b\u5efa\u6216\u6253\u5f00\u6570\u636e\u5e93",id:"\u521b\u5efa\u6216\u6253\u5f00\u6570\u636e\u5e93",level:3},{value:"\u66f4\u65b0\u6570\u636e\u5e93\u7248\u672c\u53f7",id:"\u66f4\u65b0\u6570\u636e\u5e93\u7248\u672c\u53f7",level:3},{value:"\u5b58\u50a8\u7a7a\u95f4\u64cd\u4f5c",id:"\u5b58\u50a8\u7a7a\u95f4\u64cd\u4f5c",level:2},{value:"\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4",id:"\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4",level:3},{value:"\u6570\u636e\u64cd\u4f5c",id:"\u6570\u636e\u64cd\u4f5c",level:2},{value:"\u4e8b\u52a1",id:"\u4e8b\u52a1",level:3},{value:"\u589e\u52a0\u6570\u636e",id:"\u589e\u52a0\u6570\u636e",level:3},{value:"\u67e5\u627e\u6570\u636e",id:"\u67e5\u627e\u6570\u636e",level:3},{value:"\u901a\u8fc7\u7279\u5b9a\u503c\u83b7\u53d6\u6570\u636e",id:"\u901a\u8fc7\u7279\u5b9a\u503c\u83b7\u53d6\u6570\u636e",level:4},{value:"\u901a\u8fc7\u6e38\u6807\u83b7\u53d6\u6570\u636e",id:"\u901a\u8fc7\u6e38\u6807\u83b7\u53d6\u6570\u636e",level:4},{value:"\u4f7f\u7528\u7d22\u5f15",id:"\u4f7f\u7528\u7d22\u5f15",level:4},{value:"\u4fee\u6539\u6570\u636e",id:"\u4fee\u6539\u6570\u636e",level:3},{value:"\u5220\u9664\u6570\u636e",id:"\u5220\u9664\u6570\u636e",level:3},{value:"\u5f02\u5e38\u5904\u7406",id:"\u5f02\u5e38\u5904\u7406",level:2},{value:"\u53d6\u503c\u76f8\u5173",id:"\u53d6\u503c\u76f8\u5173",level:2},{value:"key\u503c\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b",id:"key\u503c\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b",level:3},{value:"key path\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b",id:"key-path\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b",level:3},{value:"value\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b",id:"value\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b",level:3},{value:"\u4e8b\u52a1\u76f8\u5173",id:"\u4e8b\u52a1\u76f8\u5173",level:2},{value:"\u4e8b\u52a1\u4e2d\u65ad\u540e\uff0c\u4f1a\u4e0d\u4f1a\u5f71\u54cdkey\u503c\u7684\u81ea\u589e",id:"\u4e8b\u52a1\u4e2d\u65ad\u540e\u4f1a\u4e0d\u4f1a\u5f71\u54cdkey\u503c\u7684\u81ea\u589e",level:3},{value:"\u5b89\u5168\u76f8\u5173",id:"\u5b89\u5168\u76f8\u5173",level:2},{value:"\u7528\u6237\u76f8\u5173",id:"\u7528\u6237\u76f8\u5173",level:2},{value:"\u6e05\u7a7a\u7f13\u5b58",id:"\u6e05\u7a7a\u7f13\u5b58",level:3},{value:"\u8bbf\u95ee\u6743\u9650",id:"\u8bbf\u95ee\u6743\u9650",level:3}],c={toc:k};function s(e){var n=e.components,i=(0,a.Z)(e,o);return(0,l.kt)("wrapper",(0,r.Z)({},c,i,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"indexeddb\u4f7f\u7528\u4e0e\u51fa\u5751\u6307\u5357"},"IndexedDB\u4f7f\u7528\u4e0e\u51fa\u5751\u6307\u5357"),(0,l.kt)("h1",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,l.kt)("p",null,"\u672c\u6587\u901a\u8fc7\u5bf9",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u7684\u4f7f\u7528\u65b9\u6cd5\u548c\u4f7f\u7528\u573a\u666f\u8fdb\u884c\u76f8\u5173\u4ecb\u7ecd\uff0c\u5bf9\u5e38\u89c1\u7684\u95ee\u9898\u8fdb\u884c\u89e3\u7b54\u3002"),(0,l.kt)("p",null,"\u540c\u65f6\uff0c\u56e0\u4e3aMDN\u4e2d\u7684\u76f8\u5173\u6587\u6863\u7f3a\u4e4f\u76f8\u5173\u903b\u8f91\u6027\uff0c\u6240\u4ee5\u4e0d\u5bb9\u6613\u7406\u89e3\u3002\u672c\u6587\u5c06\u901a\u8fc7\u9879\u76ee\u4e2d\u5e38\u89c1\u7684\u6570\u636e\u5b58\u50a8\u548c\u64cd\u4f5c\u9700\u6c42\u6765\u8fdb\u884c\u5185\u5bb9\u7ec4\u7ec7\u3002"),(0,l.kt)("p",null,"\u8bfb\u8005\u80fd\u591f\u901a\u8fc7\u672c\u6587\u5b66\u4f1a\u5728\u9879\u76ee\u4e2d\u6b63\u786e\u7684\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\uff0c\u7ed9\u5e94\u7528\u5e26\u6765\u7684\u672c\u5730\u5b58\u50a8\u80fd\u529b\uff0c\u5e76\u4e14\u907f\u514d\u4e00\u4e9b\u5e38\u89c1\u7684\u95ee\u9898\u3002"),(0,l.kt)("h1",{id:"\u539f\u56e0\u5f00\u53d1\u8005\u9700\u8981\u5728\u672c\u5730\u8fdb\u884c\u6c38\u4e45\u5b58\u50a8"},"\u539f\u56e0\uff1a\u5f00\u53d1\u8005\u9700\u8981\u5728\u672c\u5730\u8fdb\u884c\u6c38\u4e45\u5b58\u50a8"),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u8fdb\u884c\u4e00\u4e9b\u8f83\u5927\u7684SPA\u9875\u9762\u5f00\u53d1\u65f6\uff0c\u6211\u4eec\u4f1a\u9700\u8981\u8fdb\u884c\u4e00\u4e9b\u6570\u636e\u7684\u672c\u5730\u5b58\u50a8\u3002"),(0,l.kt)("p",null,"\u5f53\u6570\u636e\u91cf\u4e0d\u5927\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7SessionStorage\u6216\u8005LocalStorage\u6765\u8fdb\u884c\u5b58\u50a8\uff0c\u4f46\u662f\u5f53\u6570\u636e\u91cf\u8f83\u5927\uff0c\u6216\u7b26\u5408\u4e00\u5b9a\u7684\u89c4\u8303\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u5e93\u6765\u8fdb\u884c\u6570\u636e\u7684\u5b58\u50a8\u3002"),(0,l.kt)("p",null,"\u5728\u6d4f\u89c8\u5668\u63d0\u4f9b\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u5171\u6709",(0,l.kt)("inlineCode",{parentName:"p"},"web sql"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u4e24\u79cd\u3002\u76f8\u8f83\u4e8eHTML5\u5df2\u7ecf\u5e9f\u5f03\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"web sql"),"\u6765\u8bf4\uff0c\u66f4\u63a8\u8350\u5927\u5bb6\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u3002"),(0,l.kt)("h1",{id:"\u7ed3\u6784"},"\u7ed3\u6784"),(0,l.kt)("p",null,"\u4e0b\u9762\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u5f20\u56fe\u6765\u4e86\u89e3\u4e0b\uff0cIndexedDB\u6574\u4f53\u7684\u7ed3\u6784\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"img",src:t(82369).Z,width:"553",height:"94"})),(0,l.kt)("p",null,"\u7c7b\u6bd4",(0,l.kt)("inlineCode",{parentName:"p"},"sql"),"\u578b\u6570\u636e\u5e93\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u4e2d\u7684DB\uff08\u6570\u636e\u5e93\uff09\u5c31\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"sql"),"\u4e2d\u7684DB\uff0c\u800c",(0,l.kt)("inlineCode",{parentName:"p"},"Object Store(\u5b58\u50a8\u7a7a\u95f4)"),"\u5219\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"\u6570\u636e\u8868"),",",(0,l.kt)("inlineCode",{parentName:"p"},"Item"),"\u5219\u7b49\u4e8e\u8868\u4e2d\u7684\u4e00\u6761",(0,l.kt)("inlineCode",{parentName:"p"},"\u8bb0\u5f55"),"\u3002"),(0,l.kt)("h1",{id:"\u4f7f\u7528indexeddb"},"\u4f7f\u7528IndexedDB"),(0,l.kt)("p",null,"\u73b0\u5728\uff0c\u6211\u4eec\u5c06\u5176\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u7684\u7ed3\u6784\u6765\u5bf9\u5176\u64cd\u4f5c\u8fdb\u884c\u4ecb\u7ecd\uff0c\u80fd\u8ba9\u5927\u5bb6\u5bf9\u8fd9\u4e2a\u5b58\u50a8\u7a7a\u95f4\u6709\u4e00\u4e2a\u521d\u6b65\u7684\u4e86\u89e3\u3002\u6211\u4eec\u4e3b\u8981\u4ecb\u7ecd\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6570\u636e\u5e93\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"\u6570\u636e\u8868\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"\u6570\u636e\u64cd\u4f5c")),(0,l.kt)("h2",{id:"\u6570\u636e\u5e93\u64cd\u4f5c"},"\u6570\u636e\u5e93\u64cd\u4f5c"),(0,l.kt)("h3",{id:"\u521b\u5efa\u6216\u6253\u5f00\u6570\u636e\u5e93"},"\u521b\u5efa\u6216\u6253\u5f00\u6570\u636e\u5e93"),(0,l.kt)("p",null,"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u7b2c\u4e00\u6b65\uff0c\u5c31\u662f\u521b\u5efa\u6216\u6253\u5f00\u4e00\u4e2a\u6570\u636e\u5e93\u3002\u6211\u4eec\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"window.indexedDB.open(DBName)"),"\u8fd9\u4e2aAPI\u6765\u6253\u8fdb\u884c\u64cd\u4f5c\u3002\u5177\u4f53\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"const request = window.indexedDB.open('test');\n\nrequest.onupgradeneeded = function (event) {\n    \n}\n\nrequest.onsuccess = function(event) {\n    //request === event.target;\n}\nrequest.onerror = function(event) {}\n\n")),(0,l.kt)("p",null,"\u8c03\u7528\u6b64\u63a5\u53e3\u65f6\uff0c\u5982\u679c\u5f53\u524d\u6570\u636e\u5e93\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u5e93\u3002"),(0,l.kt)("p",null,"\u5f53\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5\u65f6\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"IDBOpenDBRequest"),"\u5bf9\u8c61\u3002"),(0,l.kt)("p",null,"\u5728\u8fde\u63a5\u5efa\u7acb\u6210\u529f\u65f6\uff0c\u4f1a\u89e6\u53d1",(0,l.kt)("inlineCode",{parentName:"p"},"onsuccess"),"\u4e8b\u4ef6\uff0c\u5176\u4e2d\u51fd\u6570\u53c2\u6570",(0,l.kt)("inlineCode",{parentName:"p"},"event"),"\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"target"),"\u5c5e\u6027\u5c31\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"request"),"\u5bf9\u8c61\u3002"),(0,l.kt)("p",null,"\u800c\u5728\u6570\u636e\u5e93\u521b\u5efa\u6216\u8005\u7248\u672c\u66f4\u65b0\u65f6\uff0c\u4f1a\u89e6\u53d1",(0,l.kt)("inlineCode",{parentName:"p"},"onupgradeneeded"),"\u4e8b\u4ef6\u3002"),(0,l.kt)("h3",{id:"\u66f4\u65b0\u6570\u636e\u5e93\u7248\u672c\u53f7"},"\u66f4\u65b0\u6570\u636e\u5e93\u7248\u672c\u53f7"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"window.indexedDB.open"),"\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5373\u4e3a\u7248\u672c\u53f7\u3002\u5728\u4e0d\u6307\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u9ed8\u8ba4\u7248\u672c\u53f7\u4e3a1\u3002\u5177\u4f53\u793a\u4f8b\u5982\u4e0b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"const request = window.indexedDB.open('test', 2);\n\n")),(0,l.kt)("p",null,"\u5728\u9700\u8981\u66f4\u65b0\u6570\u636e\u5e93\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"schema(\u6a21\u5f0f)"),"\u65f6\uff0c\u9700\u8981\u66f4\u65b0\u7248\u672c\u53f7\u3002\u6b64\u65f6\u6211\u4eec\u6307\u5b9a\u4e00\u4e2a\u9ad8\u4e8e\u4e4b\u524d\u7248\u672c\u7684\u7248\u672c\u53f7\uff0c\u5c31\u4f1a\u89e6\u53d1",(0,l.kt)("inlineCode",{parentName:"p"},"onupgradeneeded"),"\u4e8b\u4ef6\u3002\u7c7b\u4f3c\u7684\uff0c\u5f53\u6b64\u6570\u636e\u5e93\u4e0d\u5b58\u5728\u65f6\uff0c\u4e5f\u4f1a\u89e6\u53d1\u6b64\u4e8b\u4ef6\u5e76\u4e14\u5c06\u7248\u672c\u66f4\u65b0\u5230\u7f6e\u9876\u7248\u672c\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7248\u672c\u53f7\u662f\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"Unsigned long long"),"\u6570\u5b57\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53ef\u4ee5\u662f\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6574\u6570\u3002\u4f46\u662f\uff0c\u5b83\u4e0d\u80fd\u662f\u4e00\u4e2a\u5c0f\u6570\uff0c\u5426\u5219\u5b83\u5c06\u4f1a\u88ab\u8f6c\u4e3a\u6700\u8fd1\u7684\u6574\u6570\uff0c\u540c\u65f6\u6709\u53ef\u80fd\u5bfc\u81f4",(0,l.kt)("inlineCode",{parentName:"p"},"onUpgradeneeded"),"\u4e8b\u4ef6\u4e0d\u89e6\u53d1(bug)\u3002"),(0,l.kt)("h2",{id:"\u5b58\u50a8\u7a7a\u95f4\u64cd\u4f5c"},"\u5b58\u50a8\u7a7a\u95f4\u64cd\u4f5c"),(0,l.kt)("h3",{id:"\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4"},"\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4"),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"createObjectStore"),"\u6765\u521b\u5efa\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u3002\u540c\u65f6\uff0c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"createIndex"),"\u6765\u521b\u5efa\u5b83\u7684\u7d22\u5f15\u3002\u5177\u4f53\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"var request = window.indexedDB.open('test', 1);\n\nrequest.onupgradeneeded = function (event) {\n    var db = event.target.result;\n    var objectStore = db.createObjectStore('table1', {keyPath: 'id', autoIncrement: true});\n\n    objectStore.createIndex('name', 'name', {unique: false});\n}\n\nrequest.onerror = function (event) {\n    alert(\"Why didn't you allow my web app to use IndexedDB?!\");\n};\n\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\uff1a\u53ea\u80fd\u5728",(0,l.kt)("inlineCode",{parentName:"strong"},"onupgradeneeded"),"\u56de\u8c03\u51fd\u6570\u4e2d\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4\uff0c\u800c\u4e0d\u80fd\u5728\u6570\u636e\u5e93\u6253\u5f00\u540e\u7684",(0,l.kt)("inlineCode",{parentName:"strong"},"success"),"\u56de\u8c03\u51fd\u6570\u4e2d\u521b\u5efa\u3002")),(0,l.kt)("p",null,"\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"createObjectStore"),"\u80fd\u591f\u521b\u5efa\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u3002\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5b58\u50a8\u7a7a\u95f4\u7684\u540d\u79f0\uff0c\u5373\u6211\u4eec\u4e0a\u9762\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"customers"),"\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u6307\u5b9a\u5b58\u50a8\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"keyPath"),"\u503c\u4e3a\u5b58\u50a8\u5bf9\u8c61\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u8fd9\u4e2a\u5c5e\u6027\u80fd\u591f\u5728\u83b7\u53d6\u5b58\u50a8\u7a7a\u95f4\u6570\u636e\u7684\u65f6\u5019\u5f53\u505akey\u503c\u4f7f\u7528\u3002",(0,l.kt)("inlineCode",{parentName:"li"},"autoIncrement"),"\u6307\u5b9a\u4e86",(0,l.kt)("inlineCode",{parentName:"li"},"key"),"\u503c\u662f\u5426\u81ea\u589e\uff08\u5f53key\u503c\u4e3a\u9ed8\u8ba4\u7684\u4ece1\u5f00\u59cb\u52302^53\u7684\u6574\u6570\u65f6\uff09\u3002")),(0,l.kt)("p",null,"\u800c",(0,l.kt)("inlineCode",{parentName:"p"},"createIndex"),"\u80fd\u591f\u7ed9\u5f53\u524d\u7684\u5b58\u50a8\u7a7a\u95f4\u8bbe\u7f6e\u4e00\u4e2a\u7d22\u5f15\u3002\u5b83\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u7d22\u5f15\u7684\u540d\u79f0\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u6307\u5b9a\u6839\u636e\u5b58\u50a8\u6570\u636e\u7684\u54ea\u4e00\u4e2a\u5c5e\u6027\u6765\u6784\u5efa\u7d22\u5f15\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u7b2c\u4e09\u4e2a\u5c5e\u6027\uff0c options\u5bf9\u8c61\uff0c\u5176\u4e2d\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"li"},"unique"),"\u7684\u503c\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},"true"),"\u8868\u793a\u4e0d\u5141\u8bb8\u7d22\u5f15\u503c\u76f8\u7b49\u3002")),(0,l.kt)("h2",{id:"\u6570\u636e\u64cd\u4f5c"},"\u6570\u636e\u64cd\u4f5c"),(0,l.kt)("h3",{id:"\u4e8b\u52a1"},"\u4e8b\u52a1"),(0,l.kt)("p",null,"\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u4e2d\uff0c\u6211\u4eec\u4e5f\u80fd\u591f\u4f7f\u7528\u4e8b\u52a1\u6765\u8fdb\u884c\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u3002\u4e8b\u52a1\u6709\u4e09\u4e2a\u6a21\u5f0f\uff08\u5e38\u91cf\u5df2\u7ecf\u5f03\u7528\uff09\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"readOnly"),"\uff0c\u53ea\u8bfb\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"readwrite"),"\uff0c\u8bfb\u5199\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"versionchange"),"\uff0c\u6570\u636e\u5e93\u7248\u672c\u53d8\u5316\u3002")),(0,l.kt)("p",null,"\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u4e8b\u52a1\u65f6\uff0c\u9700\u8981\u4ece\u4e0a\u9762\u9009\u62e9\u4e00\u79cd\u6a21\u5f0f\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u7684\u8bdd\uff0c\u5219\u9ed8\u8ba4\u4e3a\u53ea\u8bfb\u6a21\u5f0f\u3002\u5177\u4f53\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"const transaction = db.transaction(['customers'], 'readwrite');\n\n")),(0,l.kt)("p",null,"\u4e8b\u52a1\u51fd\u6570",(0,l.kt)("inlineCode",{parentName:"p"},"transaction"),"\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u9700\u8981\u5173\u8054\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53ef\u9009\u53c2\u6570\u4e3a\u4e8b\u52a1\u6a21\u5f0f\u3002\u4e0e\u4e0a\u9762\u7c7b\u4f3c\uff0c\u4e8b\u52a1\u6210\u529f\u65f6\u4e5f\u4f1a\u89e6\u53d1",(0,l.kt)("inlineCode",{parentName:"p"},"onsuccess"),"\u51fd\u6570\uff0c\u5931\u8d25\u65f6\u89e6\u53d1",(0,l.kt)("inlineCode",{parentName:"p"},"onerror"),"\u51fd\u6570\u3002"),(0,l.kt)("p",null,"\u4e8b\u52a1\u7684\u64cd\u4f5c\u90fd\u662f\u539f\u5b50\u6027\u7684\u3002"),(0,l.kt)("h3",{id:"\u589e\u52a0\u6570\u636e"},"\u589e\u52a0\u6570\u636e"),(0,l.kt)("p",null,"\u5f53\u5b58\u50a8\u7a7a\u95f4\u521d\u59cb\u5316\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6570\u636e\u653e\u5165\u5b58\u50a8\u7a7a\u95f4\u4e2d\u3002\u76f4\u63a5\u8c03\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"add"),"\u65b9\u6cd5\u5c31\u53ef\u4ee5\u5c06\u6570\u636e\u653e\u5165\u5b58\u50a8\u7a7a\u95f4\u5185\uff0c\u5177\u4f53\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"var request = window.indexedDB.open('test', 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction(['table1'], 'readwrite');\n\n    var objectStore = transaction.objectStore('table1');\n\n    var index = objectStore.index('name');\n\n    objectStore.add({name: 'a', age: 10});\n    objectStore.add({name: 'b', age: 20});\n}\n\n")),(0,l.kt)("p",null,"\u6ce8\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"add"),"\u65b9\u6cd5\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570key\u503c\u662f\u6307\u5b9a\u5b58\u50a8\u7a7a\u95f4\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"keyPath"),"\u503c\uff0c\u5982\u679c",(0,l.kt)("inlineCode",{parentName:"p"},"data"),"\u4e2d\u5305\u542b",(0,l.kt)("inlineCode",{parentName:"p"},"keyPath"),"\u503c\u6216\u8005\u6b64\u503c\u4e3a\u81ea\u589e\u503c\uff0c\u90a3\u4e48\u53ef\u4ee5\u7565\u53bb\u6b64\u53c2\u6570\u3002"),(0,l.kt)("h3",{id:"\u67e5\u627e\u6570\u636e"},"\u67e5\u627e\u6570\u636e"),(0,l.kt)("h4",{id:"\u901a\u8fc7\u7279\u5b9a\u503c\u83b7\u53d6\u6570\u636e"},"\u901a\u8fc7\u7279\u5b9a\u503c\u83b7\u53d6\u6570\u636e"),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u9700\u8981\u4ece\u5b58\u50a8\u7a7a\u95f4\u83b7\u53d6\u6570\u636e\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u7684\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"var request = window.indexedDB.open('test', 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction(['table1'], 'readwrite');\n\n    var objectStore = transaction.objectStore('table1');\n\n    var request = objectStore.get(1);\n\n    request.onsuccess = function (event) {\n        // \u5bf9 request.result \u505a\u4e9b\u64cd\u4f5c\uff01\n        console.log(request.result);\n    };\n\n    request.onerror = function (event) {\n        // \u9519\u8bef\u5904\u7406!\n    };\n}\n\n")),(0,l.kt)("h4",{id:"\u901a\u8fc7\u6e38\u6807\u83b7\u53d6\u6570\u636e"},"\u901a\u8fc7\u6e38\u6807\u83b7\u53d6\u6570\u636e"),(0,l.kt)("p",null,"\u5f53\u4f60\u9700\u8981\u904d\u5386\u6574\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4e2d\u7684\u6570\u636e\u65f6\uff0c\u4f60\u5c31\u9700\u8981\u4f7f\u7528\u5230\u6e38\u6807\u3002\u6e38\u6807\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"var request = window.indexedDB.open('test', 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction(['table1'], 'readwrite');\n\n    var objectStore = transaction.objectStore('table1');\n\n    var request = objectStore.openCursor();\n\n    request.onsuccess = function (event) {\n        var cursor = event.target.result;\n        if (cursor) {\n            // \u4f7f\u7528Object.assign\u65b9\u6cd5\u662f\u4e3a\u4e86\u907f\u514d\u63a7\u5236\u53f0\u6253\u5370\u65f6\u51fa\u9519\n            console.log(Object.assign(cursor.value));\n            cursor.continue();\n        }\n    };\n\n    request.onerror = function (event) {\n        // \u9519\u8bef\u5904\u7406!\n    };\n}\n\n")),(0,l.kt)("p",null,"\u4f7f\u7528\u6e38\u6807\u65f6\u6709\u4e00\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff0c\u5f53\u6e38\u6807\u904d\u5386\u6574\u4e2a\u5b58\u50a8\u7a7a\u95f4\u4f46\u662f\u5e76\u672a\u627e\u5230\u7ed9\u5b9a\u6761\u4ef6\u7684\u503c\u65f6\uff0c\u4ecd\u7136\u4f1a\u89e6\u53d1",(0,l.kt)("inlineCode",{parentName:"p"},"onsuccess"),"\u51fd\u6570\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"openCursor"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"openKeyCursor"),"\u6709\u4e24\u4e2a\u53c2\u6570\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u904d\u5386\u8303\u56f4\uff0c\u6307\u5b9a\u6e38\u6807\u7684\u8bbf\u95ee\u8303\u56f4\u3002\u8be5\u8303\u56f4\u901a\u8fc7\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"IDBKeyRange"),"\u53c2\u6570\u7684\u65b9\u6cd5\u6765\u83b7\u53d6\u3002"),(0,l.kt)("p",{parentName:"li"},"\u904d\u5386\u8303\u56f4\u53c2\u6570\u5177\u4f53\u793a\u4f8b\u5982\u4e0b\uff1a"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"// \u5339\u914d\u503c key === 1\nconst singleKeyRange = IDBKeyRange.only(1);\n\n// \u5339\u914d\u503c key >= 1\nconst lowerBoundKeyRange = IDBKeyRange.lowerBound(1);\n\n// \u5339\u914d\u503c key > 1\nconst lowerBoundOpenKeyRange = IDBKeyRange.lowerBound(1, true);\n\n// \u5339\u914d\u503c key < 2\nconst upperBoundOpenKeyRange = IDBKeyRange.upperBound(2, true);\n\n// \u5339\u914d\u503c key >= 1 && key < 2\nconst boundKeyRange = IDBKeyRange.bound(1, 2, false, true);\n\nindex.openCursor(boundKeyRange).onsuccess = function(event) {\n  const cursor = event.target.result;\n  if (cursor) {\n    // Do something with the matches.\n    cursor.continue();\n  }\n};\n\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u904d\u5386\u987a\u5e8f\uff0c\u6307\u5b9a\u6e38\u6807\u904d\u5386\u65f6\u7684\u987a\u5e8f\u548c\u5904\u7406\u76f8\u540cid\uff08keyPath\u5c5e\u6027\u6307\u5b9a\u5b57\u6bb5\uff09\u91cd\u590d\u65f6\u7684\u5904\u7406\u65b9\u6cd5\u3002\u6539\u8303\u56f4\u901a\u8fc7\u7279\u5b9a\u7684\u5b57\u7b26\u4e32\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"IDBCursor"),"\u7684\u5e38\u91cf\u5df2\u7ecf\u5f03\u7528\uff09\u6765\u83b7\u53d6\u3002\u5176\u4e2d\uff1a"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"next"),"\uff0c\u4ece\u524d\u5f80\u540e\u83b7\u53d6\u6240\u6709\u6570\u636e\uff08\u5305\u62ec\u91cd\u590d\u6570\u636e\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"prev"),"\uff0c\u4ece\u540e\u5f80\u524d\u83b7\u53d6\u6240\u6709\u6570\u636e\uff08\u5305\u62ec\u91cd\u590d\u6570\u636e\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"nextunique"),"\uff0c\u4ece\u524d\u5f80\u540e\u83b7\u53d6\u6570\u636e\uff08\u91cd\u590d\u6570\u636e\u53ea\u53d6\u7b2c\u4e00\u6761\uff0c\u7d22\u5f15\u91cd\u590d\u5373\u8ba4\u4e3a\u91cd\u590d\uff0c\u4e0b\u540c\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"prevunique"),"\uff0c\u4ece\u540e\u5f80\u524d\u83b7\u53d6\u6570\u636e\uff08\u91cd\u590d\u6570\u636e\u53ea\u53d6\u7b2c\u4e00\u6761\uff09")),(0,l.kt)("p",{parentName:"li"},"\u904d\u5386\u987a\u5e8f\u53c2\u6570\u5177\u4f53\u793a\u4f8b\u5982\u4e0b\uff1a"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"var request = window.indexedDB.open('test', 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction(['table1'], 'readwrite');\n\n    var objectStore = transaction.objectStore('table1');\n\n    var lowerBoundOpenKeyRange = IDBKeyRange.lowerBound(1, false);\n    var request = objectStore.openCursor(lowerBoundOpenKeyRange, IDBCursor.PREV);\n\n    request.onsuccess = function (event) {\n        var cursor = event.target.result;\n        if (cursor) {\n            // \u4f7f\u7528Object.assign\u65b9\u6cd5\u662f\u4e3a\u4e86\u907f\u514d\u63a7\u5236\u53f0\u6253\u5370\u65f6\u51fa\u9519\n            console.log(Object.assign(cursor.value));\n            cursor.continue();\n        }\n    };\n\n    request.onerror = function (event) {\n        // \u9519\u8bef\u5904\u7406!\n    };\n}\n\n")),(0,l.kt)("h4",{id:"\u4f7f\u7528\u7d22\u5f15"},"\u4f7f\u7528\u7d22\u5f15"),(0,l.kt)("p",null,"\u5728\u524d\u9762\u6784\u5efa\u6570\u636e\u5e93\u65f6\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e24\u4e2a\u7d22\u5f15\u3002\u73b0\u5728\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7d22\u5f15\u6765\u8fdb\u884c\u6570\u636e\u68c0\u7d22\u3002\u4ed6\u7684\u672c\u8d28\u8fd8\u662f\u901a\u8fc7\u4e4b\u524d\u83b7\u53d6\u6570\u636e\u7684API\u6765\u8fdb\u884c\uff0c\u53ea\u662f\u5c06\u539f\u6765\u4f7f\u7528\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"keyPath"),"\u5c5e\u6027\u8f6c\u6362\u6210\u4e3a\u4e86\u7d22\u5f15\u6307\u5b9a\u7684\u5c5e\u6027\u3002\u5177\u4f53\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"var request = window.indexedDB.open('test', 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction(['table1'], 'readwrite');\n\n    var objectStore = transaction.objectStore('table1');\n\n    var index = objectStore.index('name');\n\n    // \u7b2c\u4e00\u79cd\uff0cget\u65b9\u6cd5\n    index.get('a').onsuccess = function (event) {\n        console.log(event.target.result);\n    }\n\n    // \u7b2c\u4e8c\u79cd\uff0c\u666e\u901a\u6e38\u6807\u65b9\u6cd5\n    index.openCursor().onsuccess = function (event) {\n        console.log('openCursor:', event.target.result.value);\n    }\n\n    // \u7b2c\u4e09\u79cd\uff0c\u952e\u6e38\u6807\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4e0e\u7b2c\u4e8c\u79cd\u7684\u5dee\u522b\u4e3a\uff1a\u666e\u901a\u6e38\u6807\u5e26\u6709value\u503c\u8868\u793a\u83b7\u53d6\u7684\u6570\u636e\uff0c\u800c\u952e\u6e38\u6807\u6ca1\u6709\n    index.openKeyCursor().onsuccess = function (event) {\n        console.log('openKeyCursor:', event.target.result);\n    }\n}\n\n")),(0,l.kt)("h3",{id:"\u4fee\u6539\u6570\u636e"},"\u4fee\u6539\u6570\u636e"),(0,l.kt)("p",null,"\u5f53\u9700\u8981\u4fee\u6539\u5b58\u50a8\u7a7a\u95f4\u4e2d\u7684\u6570\u636e\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684API\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'var objectStore = transaction.objectStore("customers");\n\nvar request = objectStore.put(data);\n\nrequest.onsuccess = function (event) {\n    \n}\n\n')),(0,l.kt)("p",null,"\u6ce8\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"put"),"\u65b9\u6cd5\u4e0d\u4ec5\u80fd\u591f\u4fee\u6539\u73b0\u6709\u6570\u636e\uff0c\u4e5f\u80fd\u591f\u5f80\u5b58\u50a8\u7a7a\u95f4\u4e2d\u589e\u52a0\u65b0\u7684\u6570\u636e\u3002"),(0,l.kt)("h3",{id:"\u5220\u9664\u6570\u636e"},"\u5220\u9664\u6570\u636e"),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u9700\u8981\u5220\u9664\u5df2\u7ecf\u65e0\u7528\u7684\u6570\u636e\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'var objectStore = transaction.objectStore("customers");\n\nvar request = objectStore.delete(name);\n\nrequest.onsuccess = function (event) {\n    \n}\n\n')),(0,l.kt)("h2",{id:"\u5f02\u5e38\u5904\u7406"},"\u5f02\u5e38\u5904\u7406"),(0,l.kt)("p",null,"\u5728\u6d4f\u89c8\u5668\u6709\u5982\u4e0b\u64cd\u4f5c\u7684\u60c5\u51b5\u4e0b\uff0cindexedDB\u53ef\u80fd\u4f1a\u51fa\u73b0\u5f02\u5e38\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7528\u6237\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58"),(0,l.kt)("li",{parentName:"ul"},"\u5b58\u50a8\u7a7a\u95f4\u8d85\u8fc7\u5927\u5c0f\u9650\u5236")),(0,l.kt)("p",null,"\u6b64\u65f6\uff0c\u9700\u8981\u5bf9\u9519\u8bef\u8fdb\u884c\u6355\u83b7\uff0c\u5e76\u4e14\u5bf9\u7528\u6237\u8fdb\u884c\u63d0\u793a\u3002\u6b64\u7ae0\u8282\u4e0d\u662f\u672c\u6587\u91cd\u70b9\uff0c\u518d\u6b64\u7565\u8fc7\u3002"),(0,l.kt)("h1",{id:"\u6269\u5c55\u987b\u77e5"},"\u6269\u5c55\u987b\u77e5"),(0,l.kt)("h2",{id:"\u53d6\u503c\u76f8\u5173"},"\u53d6\u503c\u76f8\u5173"),(0,l.kt)("h3",{id:"key\u503c\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b"},"key\u503c\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b"),(0,l.kt)("p",null,"\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u4e2d\uff0c\u952e\u503c\u5bf9\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"key"),"\u503c\u53ef\u4ee5\u63a5\u53d7\u4ee5\u4e0b\u51e0\u79cd\u7c7b\u578b\u7684\u503c\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"number"),(0,l.kt)("li",{parentName:"ul"},"data"),(0,l.kt)("li",{parentName:"ul"},"string"),(0,l.kt)("li",{parentName:"ul"},"binary"),(0,l.kt)("li",{parentName:"ul"},"array")),(0,l.kt)("p",null,"\u5177\u4f53\u8bf4\u660e\u53ef\u4ee5\u89c1\u6587\u6863",(0,l.kt)("a",{parentName:"p",href:"https://link.juejin.cn/?target=https%3A%2F%2Fw3c.github.io%2FIndexedDB%2F%23key-construct"},"\u6b64\u5904"),"\u3002"),(0,l.kt)("h3",{id:"key-path\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b"},"key path\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b"),(0,l.kt)("p",null,"\u5f53\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"key"),"\u503c\u53d8\u4e3a\u4e3b\u952e\uff0c\u5373",(0,l.kt)("inlineCode",{parentName:"p"},"keyPath"),"\u65f6\uff0c\u5b83\u7684\u503c\u5c31\u53ea\u80fd\u662f\u4ee5\u4e0b\u51e0\u79cd\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Blob"),(0,l.kt)("li",{parentName:"ul"},"File"),(0,l.kt)("li",{parentName:"ul"},"Array"),(0,l.kt)("li",{parentName:"ul"},"String")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\uff1a\u7a7a\u683c\u4e0d\u80fd\u51fa\u73b0\u5728key path\u4e2d"),"\u3002"),(0,l.kt)("p",null,"\u5177\u4f53\u8bf4\u660e\u53ef\u4ee5\u89c1\u6587\u6863",(0,l.kt)("a",{parentName:"p",href:"https://link.juejin.cn/?target=https%3A%2F%2Fw3c.github.io%2FIndexedDB%2F%23key-path-construct"},"\u6b64\u5904"),"\u3002"),(0,l.kt)("h3",{id:"value\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b"},"value\u80fd\u591f\u63a5\u53d7\u7684\u6570\u636e\u7c7b\u578b"),(0,l.kt)("p",null,"\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u4e2d\uff0cvalue\u80fd\u591f\u63a5\u53d7ECMA-262\u4e2d\u6240\u6709\u7684\u7c7b\u578b\u7684\u503c\uff0c\u4f8b\u5982String\uff0cDate\uff0cImageDate\u7b49\u3002"),(0,l.kt)("h2",{id:"\u4e8b\u52a1\u76f8\u5173"},"\u4e8b\u52a1\u76f8\u5173"),(0,l.kt)("h3",{id:"\u4e8b\u52a1\u4e2d\u65ad\u540e\u4f1a\u4e0d\u4f1a\u5f71\u54cdkey\u503c\u7684\u81ea\u589e"},"\u4e8b\u52a1\u4e2d\u65ad\u540e\uff0c\u4f1a\u4e0d\u4f1a\u5f71\u54cdkey\u503c\u7684\u81ea\u589e"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u5728\u6ca1\u6709\u6307\u5b9akey\u503c\u7684\u65f6\u5019\u5c31\u4f1a\u91c7\u7528\u81ea\u589e\u7684key\u503c\u3002\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u5728\u4e2d\u9014\u4e2d\u65ad\uff0c\u90a3\u4e48key\u503c\u7684\u81ea\u589e\u5c06\u4f1a\u4ece\u4e2d\u65ad\u7684\u4e8b\u52a1\u5f00\u59cb\u524d\u7684key\u5f00\u59cb\u3002"),(0,l.kt)("h2",{id:"\u5b89\u5168\u76f8\u5173"},"\u5b89\u5168\u76f8\u5173"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u4e5f\u53d7\u5230\u6d4f\u89c8\u5668",(0,l.kt)("a",{parentName:"p",href:"https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FSecurity%2FSame-origin_policy"},"\u540c\u6e90\u7b56\u7565"),"\u7684\u9650\u5236\u3002"),(0,l.kt)("h2",{id:"\u7528\u6237\u76f8\u5173"},"\u7528\u6237\u76f8\u5173"),(0,l.kt)("h3",{id:"\u6e05\u7a7a\u7f13\u5b58"},"\u6e05\u7a7a\u7f13\u5b58"),(0,l.kt)("p",null,"\u7528\u6237\u5728\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58\u65f6\uff0c\u53ef\u80fd\u4f1a\u6e05\u9664",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u4e2d\u76f8\u5173\u7684\u6570\u636e\u3002"),(0,l.kt)("h3",{id:"\u8bbf\u95ee\u6743\u9650"},"\u8bbf\u95ee\u6743\u9650"),(0,l.kt)("p",null,"\u90e8\u5206\u6d4f\u89c8\u5668\u5982Safari\u624b\u673a\u7248\u9690\u79c1\u6a21\u5f0f\u5728\u8bbf\u95ee",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u7531\u4e8e\u6ca1\u6709\u6743\u9650\u800c\u5bfc\u81f4\u7684\u5f02\u5e38\uff08LocalStorage\u4e5f\u4f1a\uff09\uff0c\u9700\u8981\u8fdb\u884c\u5f02\u5e38\u5904\u7406\u3002"),(0,l.kt)("h1",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u5728\u672c\u5730\u5b58\u50a8\u4e2d\u6709\u7740\u65e0\u53ef\u66ff\u4ee3\u7684\u4f5c\u7528\uff0c\u662f\u66ff\u4ee3\u5173\u7cfb\u578b\u6570\u636e\u5e93",(0,l.kt)("inlineCode",{parentName:"p"},"web sql"),"\u7684\u4ea7\u54c1\uff0c\u80fd\u591f\u5bf9\u5927\u91cf\u6570\u636e\u8fdb\u884c\u5b58\u50a8\u3002\u5728\u8bb8\u591a\u9700\u8981\u8fd0\u7528\u79bb\u7ebf\u5b58\u50a8\u7684\u573a\u666f\u4e0b\uff0c\u5b83\u80fd\u591f\u7ed9\u6211\u4eec\u63d0\u4f9b\u6709\u6548\u7684\u652f\u6491\u3002"),(0,l.kt)("p",null,"\u4f46\u662f\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"IndexedDB"),"\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u4ecd\u7136\u9700\u8981\u907f\u514d\u53ef\u80fd\u4f1a\u51fa\u73b0\u7684\u4e00\u4e9b\u95ee\u9898\uff0c\u6216\u8005\u5bf9\u53ef\u80fd\u5bfc\u81f4\u7684\u4e0d\u5229\u5f71\u54cd\u6709\u4e00\u5b9a\u7684\u5bb9\u9519\u5904\u7406\u3002\u8fd9\u6837\u624d\u4e0d\u4f1a\u5bf9\u5e94\u7528\u4ea7\u751f\u91cd\u5927\u5f71\u54cd\u3002"),(0,l.kt)("h1",{id:"\u53c2\u8003\u6587\u732e"},"\u53c2\u8003\u6587\u732e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FSecurity%2FSame-origin_policy"},"\u6d4f\u89c8\u5668\u7684\u540c\u6e90\u7b56\u7565"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FIndexedDB_API%2FUsing_IndexedDB"},"\u4f7f\u7528indexedDB MDN\u5165\u95e8"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FIndexedDB_API"},"IndexedDB API\u53c2\u8003"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://link.juejin.cn/?target=https%3A%2F%2Fw3c.github.io%2FIndexedDB%2F"},"W3C IndexedDB 2.0\u89c4\u8303"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/104536473"},"\u524d\u7aef\u5927\u5bb9\u91cf\u7f13\u5b58\u65b9\u6848-IndexedDB")))))}s.isMDXComponent=!0},82369:function(e,n){n.Z="data:;base64,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"}}]);