<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-体系/codewhy前端体系/Vue3全家桶实战/Vue3-Composition-API（一）">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/FED-DOC/blog/rss.xml" title="IT学习笔记 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/FED-DOC/blog/atom.xml" title="IT学习笔记 Atom Feed"><title data-rh="true">Vue3-Composition-API（一） | IT学习笔记</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guing.github.io/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-Composition-API（一）"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Vue3-Composition-API（一） | IT学习笔记"><meta data-rh="true" name="description" content="总结"><meta data-rh="true" property="og:description" content="总结"><link data-rh="true" rel="icon" href="/FED-DOC/img/my.jpg"><link data-rh="true" rel="canonical" href="https://guing.github.io/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-Composition-API（一）"><link data-rh="true" rel="alternate" href="https://guing.github.io/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-Composition-API（一）" hreflang="en"><link data-rh="true" rel="alternate" href="https://guing.github.io/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-Composition-API（一）" hreflang="x-default"><link rel="stylesheet" href="/FED-DOC/assets/css/styles.5627add0.css">
<link rel="preload" href="/FED-DOC/assets/js/runtime~main.65cec0f1.js" as="script">
<link rel="preload" href="/FED-DOC/assets/js/main.4ec18485.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/FED-DOC/"><div class="navbar__logo"><img src="/FED-DOC/img/my.jpg" alt="IT学习笔记" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/FED-DOC/img/my.jpg" alt="IT学习笔记" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">IT学习笔记</b></a><a class="navbar__item navbar__link navbar__link--active" href="/FED-DOC/docs/intro">前端</a><a class="navbar__item navbar__link" href="/FED-DOC/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Guing/FED-DOC" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/FED-DOC/docs/intro">前端学习笔记</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Html/MDN笔记/">Html</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Css/2021必修 CSS架构系统精讲/2-3 CSS设计模式/note">Css</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Vue/Nuxt-前端老张/笔记">Vue</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/React/React17系统精讲结合TS打造旅游电商平台2021/笔记/">React</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Nodejs/intro">Nodejs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/TypeScript/Typescript入门学习笔记/">TypeScript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/小程序/codewhy前端体系-小程序/总结">小程序</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/浏览器/IndexedDB数据库/IndexedDB使用">浏览器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/性能优化/vue-cli优化">性能优化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/网络协议/intro">网络协议</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/工程化/intro">工程化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/单元测试/intro">单元测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/构建工具/webpack基础使用">构建工具</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/安全/intro">安全</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/算法/300分钟搞定数据结构与算法/">算法</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/移动端/intro">移动端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/FED-DOC/docs/体系/codewhy前端体系/HTML与CSS/整体大纲">体系</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/HTML与CSS/整体大纲">codewhy前端体系</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/HTML与CSS/整体大纲">HTML与CSS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/JavaScript基础/JavaScript基础">JavaScript基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/JavaScript高级/JavaScript高级-this指向">JavaScript高级</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/JavaScript实战框架应用/邂逅jQuery、属性和DOM操作">JavaScript实战框架应用</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/前端工程化+Node+模块化+webpack+Git/邂逅Node.js开发">前端工程化+Node+模块化+webpack+Git</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/邂逅Vue.js开发">Vue3全家桶实战</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/邂逅Vue.js开发">邂逅Vue.js开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue基础–模板语法">Vue基础–模板语法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue基础–模板语法（二）">Vue基础–模板语法（二）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue基础-Options API">Vue基础-Options API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue基础-v-model表单">Vue基础-v-model表单</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue组件化开发基础">Vue组件化开发基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/组件化-组件间通信">组件化-组件间通信</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/组件化-插槽Slot和非父子通信">组件化-插槽Slot和非父子通信</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/组件化-额外知识补充">组件化-额外知识补充</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-Composition-API（一）">Vue3-Composition-API（一）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-Composition-API（二）">Vue3-Composition-API（二）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-高级特性补充(后续)">Vue3-高级特性补充(后续)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue全家桶 - Vue-Router详解">Vue全家桶 - Vue-Router详解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue全家桶 - Vuex状态管理">Vue全家桶 - Vuex状态管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue全家桶 - Pinia状态管理">Vue全家桶 - Pinia状态管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/网络请求库axios">网络请求库axios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/项目实战">项目实战</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-高级特性补充">Vue3-高级特性补充</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-实现过渡动画">Vue3-实现过渡动画</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue2-Vue3响应式原理">Vue2-Vue3响应式原理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/项目打包和自动化部署">项目打包和自动化部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/工具">工具</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/React18全家桶+Hooks+项目实战/React在前端的地位">React18全家桶+Hooks+项目实战</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/TypeScript开发实战/邂逅TypeScript语法">TypeScript开发实战</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3+TS后台管理系统/项目规范+prettier+eslint+editconfig">Vue3+TS后台管理系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/阶段十四-Node服务器高级开发/Node跨域">阶段十四-Node服务器高级开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/Webpack+Gulp+Vite+Rollup/理解source-map">Webpack+Gulp+Vite+Rollup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/codewhy前端体系/就业指导/高级前端会问到的问题">就业指导</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/体系/慕课网前端架构师/需求/1周 需求分析和架构设计/乐高架构方案设计文档">慕课网前端架构师</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/面试/webpack面试题/">面试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Go/资深go开发工程师/基础">Go</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/FED-DOC/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">体系</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">codewhy前端体系</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Vue3全家桶实战</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Vue3-Composition-API（一）</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Vue3-Composition-API（一）</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="总结">总结<a class="hash-link" href="#总结" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="01-认识组合api">0.1. 认识组合API<a class="hash-link" href="#01-认识组合api" title="Direct link to heading">​</a></h3><ul><li>options API -&gt; Composition API</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="02-组合api实现计数器案例">0.2. 组合API实现计数器案例<a class="hash-link" href="#02-组合api实现计数器案例" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_mojV" id="11-使用reactive定义响应式数据">1.1. 使用reactive定义响应式数据<a class="hash-link" href="#11-使用reactive定义响应式数据" title="Direct link to heading">​</a></h3><ul><li>复杂类型</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="12-使用ref定义响应式数据">1.2. 使用ref定义响应式数据<a class="hash-link" href="#12-使用ref定义响应式数据" title="Direct link to heading">​</a></h3><ul><li>基本类型</li><li>复杂类型</li><li>在template自动解包：浅层解包<ul><li>info = { ref: xxxx }</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="13-开发中选择reactiveref">1.3. 开发中选择reactive/ref<a class="hash-link" href="#13-开发中选择reactiveref" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_mojV" id="14-readonly的使用">1.4. readonly的使用<a class="hash-link" href="#14-readonly的使用" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="141-单项数据流">1.4.1. 单项数据流<a class="hash-link" href="#141-单项数据流" title="Direct link to heading">​</a></h4><ul><li>Vue/React</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="142-readonly">14.2. readonly<a class="hash-link" href="#142-readonly" title="Direct link to heading">​</a></h4><h3 class="anchor anchorWithStickyNavbar_mojV" id="15-reactive函数补充">1.5. reactive函数补充<a class="hash-link" href="#15-reactive函数补充" title="Direct link to heading">​</a></h3><ul><li>isProxy</li><li>isReactive</li><li>isReadonly</li><li>shallowReactive</li><li>shallowReadonly</li><li>...</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="16-ref函数补充">1.6. ref函数补充<a class="hash-link" href="#16-ref函数补充" title="Direct link to heading">​</a></h3><ul><li>toRefs</li><li>toRef</li><li>unref</li><li>toRaw</li><li>...</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="17-setup中不能使用this">1.7. setup中不能使用this<a class="hash-link" href="#17-setup中不能使用this" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_mojV" id="options-api的弊端"><strong>Options API的弊端</strong><a class="hash-link" href="#options-api的弊端" title="Direct link to heading">​</a></h2><ul><li><p>在Vue2中，我们编写组件的方式是Options API：</p><ul><li><strong>Options API的一大特点就是在对应的属性中编写对应的功能模块</strong>；</li><li>比如data定义数据、methods中定义方法、computed中定义计算属性、watch中监听属性改变，也包括生命周期钩子；</li></ul></li><li><p><strong>但是这种代码有一个很大的弊端：</strong></p><ul><li><strong>当我们实现某一个功能时，这个功能对应的代码逻辑会被拆分到各个属性中；</strong></li><li><strong>当我们组件变得更大、更复杂时，逻辑关注点的列表就会增长，那么同一个功能的逻辑就会被拆分的很分散；</strong></li><li>尤其对于那些一开始没有编写这些组件的人来说，这个组件的代码是难以阅读和理解的（阅读组件的其他人）；</li></ul></li><li><p>下面我们来看一个非常大的组件，其中的逻辑功能按照颜色进行了划分：</p><ul><li><strong>这种碎片化的代码使用理解和维护这个复杂的组件变得异常困难，并且隐藏了潜在的逻辑问题</strong>；</li><li>并且当我们处理单个逻辑关注点时，需要不断的跳到相应的代码块中；</li></ul></li></ul><p><strong>大组件的逻辑分散</strong></p><ul><li>如果我们能将同一个逻辑关注 点相关的代码收集在一起会更 好。</li><li><strong>这就是Composition API想 要做的事情，以及可以帮助我 们完成的事情。</strong><ul><li>也有人把Vue Composition API简称为<strong>VCA</strong>。</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="认识composition-api"><strong>认识Composition API</strong><a class="hash-link" href="#认识composition-api" title="Direct link to heading">​</a></h2><ul><li>那么既然知道Composition API想要帮助我们做什么事情，接下来看一下到底是怎么做呢？ <ul><li>为了开始使用Composition API，我们需要有一个可以实际使用它（编写代码）的地方；</li><li>在Vue组件中，这个位置就是 <strong>setup 函数</strong>；</li></ul></li></ul><ul><li><p><strong>setup其实就是组件的另外一个选项：</strong></p><ul><li>只不过这个选项强大到我们可以用它来替代之前所编写的大部分其他选项；</li><li>比如methods、computed、watch、data、生命周期等等；</li></ul></li><li><p>接下来我们一起学习这个函数的使用：</p><ul><li>函数的参数</li><li>函数的返回值</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="setup函数的基本使用">Setup函数的基本使用<a class="hash-link" href="#setup函数的基本使用" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="setup函数的参数"><strong>setup函数的参数</strong><a class="hash-link" href="#setup函数的参数" title="Direct link to heading">​</a></h3><ul><li>我们先来研究一个setup函数的参数，它主要<strong>有两个参数</strong>：<ul><li>第一个参数：<strong>props</strong></li><li>第二个参数：<strong>context</strong></li></ul></li></ul><ul><li><p>props非常好理解，它其实就是<strong>父组件传递过来的属性</strong>会被<strong>放到props对象</strong>中，我们在<strong>setup中如果需要使用</strong>，那么就可以直接 <strong>通过props参数获取：</strong></p><ul><li>对于定义props的类型，我们还是和之前的规则是一样的，在props选项中定义；</li><li>并且在template中依然是可以正常去使用props中的属性，比如message；</li><li>如果我们在setup函数中想要使用props，那么不可以通过 this 去获取；</li><li>因为props有直接作为参数传递到setup函数中，所以我们可以直接通过参数来使用即可；</li></ul></li><li><p>另外一个参数是，我们也称之为是一个<strong>SetupContext</strong>，它里面<strong>包含三个属性</strong>：</p><ul><li><strong>attrs：所有的非prop的attribute；</strong></li><li><strong>slots：父组件传递过来的插槽（这个在以渲染函数返回时会有作用，后面会讲到）；</strong></li><li><strong>emit：当我们组件内部需要发出事件时会用到emit（因为我们不能访问this，所以不可以通过 this.$emit发出事件）；</strong></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="setup函数的返回值"><strong>setup函数的返回值</strong><a class="hash-link" href="#setup函数的返回值" title="Direct link to heading">​</a></h3><ul><li><strong>setup的返回值可以在模板template中被使用</strong>；<ul><li>也就是说我们可以通过setup的返回值来替代data选项；</li></ul></li><li><strong>但是我们在setup中定义的数据都不是响应式数据</strong></li></ul><div class="codeBlockContainer_I0IT language-vue theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-vue codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;app&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- template中ref对象自动解包 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;当前计数: {{ counter }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { ref } from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import useCounter from &#x27;./hooks/useCounter&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1.定义counter的内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 默认定义的数据都不是响应式数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let counter = ref(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const increment = () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      counter.value++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      console.log(counter.value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const decrement = () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      counter.value--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      counter,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      increment,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      decrement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="setup定义数据">Setup定义数据<a class="hash-link" href="#setup定义数据" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="reactive-api"><strong>Reactive API</strong><a class="hash-link" href="#reactive-api" title="Direct link to heading">​</a></h3><ul><li>如果想为在setup中定义的数据提供响应式的特性，那么我们可以<strong>使用reactive的函数</strong>：</li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 2.1.reactive函数: 定义复杂类型的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> account </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reactive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;coderwhy&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123456&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ul><li><strong>为什么就可以变成响应式的呢？</strong><ul><li>这是因为<strong>当我们使用reactive函数处理我们的数据之后，数据再次被使用时就会进行依赖收集</strong>；</li><li><strong>当数据发生改变时，所有收集到的依赖都是进行对应的响应式操作</strong>（比如更新界面）；</li><li>事实上，<strong>我们编写的data选项，也是在内部交给了reactive函数将其编程响应式对象的</strong>；</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="ref-api"><strong>Ref API</strong><a class="hash-link" href="#ref-api" title="Direct link to heading">​</a></h3><ul><li>reactive API对<strong>传入的类型是有限制的</strong>，它要求我们必须传入的是<strong>一个对象或者数组类型</strong>：</li><li>如果我们传入一个基本数据类型（ String、Number、Boolean）会报一个警告；</li></ul><p><img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.019-968aba294079d3c34736382902eff934.png" width="522" height="38" class="img_E7b_"></p><ul><li>这个时候Vue3给我们提供了另外一个API：<strong>ref API</strong><ul><li>ref 会返回一个可变的响应式对象，该对象作为一个 <strong>响应式的引用</strong> 维护着它内部的值，这就是ref名称的来源；</li><li>它内部的值是在ref的 value 属性中被维护的；</li></ul></li><li><strong>注意： ref也可以定义复杂的数据</strong></li></ul><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// counter定义响应式数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">increment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        counter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ul><li><strong>这里有两个注意事项：</strong><ul><li>在模板中引入ref的值时，Vue会自动帮助我们进行解包操作，所以我们并不需要在模板中通过 ref.value 的方式来使用；<ul><li><code>  &lt;h2&gt;当前计数: {{ info.counter }}&lt;/h2&gt;</code></li></ul></li><li>但是在 setup 函数内部，它依然是一个 ref引用， 所以对其进行操作时，我们依然需要使用 ref.value的方式；<ul><li><code> counter.value++</code></li></ul></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="ref自动解包"><strong>Ref自动解包</strong><a class="hash-link" href="#ref自动解包" title="Direct link to heading">​</a></h3><ul><li>如果我们<strong>将ref放到一个reactive的属性</strong>当中，那么<strong>在模板中使用时，它会自动解包</strong>：</li></ul><p><img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.021-2575e770eb93f7b8fb457d124a03e70a.jpeg" width="392" height="470" class="img_E7b_"></p><ul><li><strong>模板中的解包是浅层的解包</strong>，如果我们的代码是下面的方式，则需要手动解包</li></ul><p><img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.022-197980df06c813b5e693317a675d52a9.jpeg" width="476" height="451" class="img_E7b_"></p><div class="codeBlockContainer_I0IT language-vue theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-vue codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;message: {{ message }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;changeMessage&quot;&gt;修改message&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;账号: {{ account.username }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;密码: {{ account.password }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;changeAccount&quot;&gt;修改账号&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 默认情况下在template中使用ref时, vue会自动对其进行解包(取出其中value) --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;当前计数: {{ counter }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;counter++&quot;&gt;+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 使用的时候不需要写.value --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;当前计数: {{ info.counter }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 修改的时候需要写.value --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;info.counter.value++&quot;&gt;+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  import { reactive, ref } from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setup() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 1.定义普通的数据: 可以正常的被使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 缺点: 数据不是响应式的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      let message = &quot;Hello World&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function changeMessage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message = &quot;你好啊,李银河!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 2.定义响应式数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 2.1.reactive函数: 定义复杂类型的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const account = reactive({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username: &quot;coderwhy&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        password: &quot;123456&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function changeAccount() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        account.username = &quot;kobe&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 2.2.ref函数: 定义简单类型的数据(也可以定义复杂类型的数据)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // counter定义响应式数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const counter = ref(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function increment() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        counter.value++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 3.ref是浅层解包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const info = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changeMessage,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        account,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changeAccount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        counter,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        increment,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-vue theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-vue codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      账号: &lt;input type=&quot;text&quot; v-model=&quot;account.username&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      密码: &lt;input type=&quot;password&quot; v-model=&quot;account.password&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      账号: &lt;input type=&quot;text&quot; v-model=&quot;username&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      密码: &lt;input type=&quot;password&quot; v-model=&quot;password&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;show-info :name=&quot;name&quot; :age=&quot;age&quot;&gt;&lt;/show-info&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  import { onMounted, reactive, ref } from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  import ShowInfo from &#x27;./ShowInfo.vue&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    components: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ShowInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message: &quot;Hello World&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setup() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 定义响应式数据: reactive/ref</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 强调: ref也可以定义复杂的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const info = ref({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      console.log(info.value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 1.reactive的应用场景</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 1.1.条件一: reactive应用于本地的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 1.2.条件二: 多个数据之间是有关系/联系(聚合的数据, 组织在一起会有特定的作用)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const account = reactive({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username: &quot;coderwhy&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        password: &quot;1234567&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const username = ref(&quot;coderwhy&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const password = ref(&quot;123456&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 2.ref的应用场景: 其他的场景基本都用ref(computed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 2.1.定义本地的一些简单数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const message = ref(&quot;Hello World&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const counter = ref(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const name = ref(&quot;why&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const age = ref(18)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 2.定义从网络中获取的数据也是使用ref</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // const musics = reactive([])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const musics = ref([])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      onMounted(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const serverMusics = [&quot;海阔天空&quot;, &quot;小苹果&quot;, &quot;野狼&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        musics.value = serverMusics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        account,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        password,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="认识readonly"><strong>认识readonly</strong><a class="hash-link" href="#认识readonly" title="Direct link to heading">​</a></h3><ul><li><p>我们通过reactive或者ref可以获取到一个响应式的对象，但是某些情况下，我们传入给其他地方（组件）的这个响应式对象希 望在另外一个地方（组件）被使用，但是<strong>不能被修改</strong>，这个时候如何防止这种情况的出现呢？</p><ul><li>Vue3为我们提供了readonly的方法；</li><li><strong>readonly会返回原始对象的只读代理（也就是它依然是一个Proxy，这是一个proxy的set方法被劫持，并且不能对其进行修 改）</strong>；</li></ul></li><li><p><strong>在开发中常见的readonly方法会传入三个类型的参数：</strong></p><ul><li>类型一：普通对象；</li><li>类型二：reactive返回的对象；</li><li>类型三：ref的对象；</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="readonly的使用"><strong>readonly的使用</strong><a class="hash-link" href="#readonly的使用" title="Direct link to heading">​</a></h3><ul><li><p>在readonly的使用过程中，有如下规则： </p><ul><li><strong>readonly返回的对象都是不允许修改的；</strong> </li><li><strong>但是经过readonly处理的原来的对象是允许被修改的；</strong> <ul><li>比如 const info = readonly(obj)，info对象是不允许被修改的； </li><li>当obj被修改时，readonly返回的info对象也会被修改； </li></ul></li><li>但是我们不能去修改readonly返回的对象info； </li></ul></li><li><p><strong>其实本质上就是readonly返回的对象的setter方法被劫持了而已；</strong> </p></li></ul><p><img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.023-1c98d76a638886db187ca0e332383fef.jpeg" width="403" height="572" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="readonly的应用"><strong>readonly的应用</strong><a class="hash-link" href="#readonly的应用" title="Direct link to heading">​</a></h3><ul><li><strong>那么这个readonly有什么用呢？</strong><ul><li>在我们传递给其他组件数据时，往往希望其他组件使用我们传递的内容，但是不允许它们修改时，就可以使用readonly了；</li></ul></li></ul><div class="codeBlockContainer_I0IT language-vue theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-vue codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;h2&gt;App: {{ info }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;show-info :info=&quot;info&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             :roInfo=&quot;roInfo&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             @changeInfoName=&quot;changeInfoName&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             @changeRoInfoName=&quot;changeRoInfoName&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/show-info&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  import { reactive, readonly } from &#x27;vue&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  import ShowInfo from &#x27;./ShowInfo.vue&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    components: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ShowInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setup() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 本地定义多个数据, 都需要传递给子组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // name/age/height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const info = reactive({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: &quot;why&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        age: 18,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        height: 1.88</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function changeInfoName(payload) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        info.name = payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 使用readOnly包裹info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      const roInfo = readonly(info)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function changeRoInfoName(payload) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        info.name = payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        info,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changeInfoName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        roInfo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changeRoInfoName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT language-vue theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-vue codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;ShowInfo: {{ info }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 代码没有错误, 但是违背规范(单项数据流) --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;info.name = &#x27;kobe&#x27;&quot;&gt;ShowInfo按钮&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 正确的做法: 符合单项数据流--&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;showInfobtnClick&quot;&gt;ShowInfo按钮&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;hr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 使用readonly的数据 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h2&gt;ShowInfo: {{ roInfo }}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 代码就会无效(报警告) --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- &lt;button @click=&quot;roInfo.name = &#x27;james&#x27;&quot;&gt;ShowInfo按钮&lt;/button&gt; --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;!-- 正确的做法 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button @click=&quot;roInfoBtnClick&quot;&gt;roInfo按钮&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    props: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // reactive数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      info: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        type: Object,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default: () =&gt; ({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // readonly数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      roInfo: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        type: Object,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default: () =&gt; ({})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emits: [&quot;changeInfoName&quot;, &quot;changeRoInfoName&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setup(props, context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function showInfobtnClick() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.emit(&quot;changeInfoName&quot;, &quot;kobe&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      function roInfoBtnClick() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.emit(&quot;changeRoInfoName&quot;, &quot;james&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        showInfobtnClick,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        roInfoBtnClick</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="响应式数据的其他api">响应式数据的其他API<a class="hash-link" href="#响应式数据的其他api" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="reactive判断的api"><strong>Reactive判断的API</strong><a class="hash-link" href="#reactive判断的api" title="Direct link to heading">​</a></h3><ul><li><p><strong>isProxy</strong></p><ul><li>检查对象是否是由 reactive 或 readonly创建的 proxy。</li></ul></li><li><p><strong>isReactive</strong></p><ul><li>检查对象是否是由 reactive创建的响应式代理：</li><li>如果该代理是 readonly 建的，但包裹了由 reactive 创建的另一个代理，它也会返回 true；</li></ul></li><li><p><strong>isReadonly</strong></p><ul><li>检查对象是否是由 readonly 创建的只读代理。</li></ul></li><li><p><strong>toRaw</strong></p><ul><li>返回 reactive 或 readonly 代理的原始对象（<strong>不</strong>建议保留对原始对象的持久引用。请谨慎使用）。</li></ul></li><li><p><strong>shallowReactive</strong></p><ul><li>创建一个响应式代理，它跟踪其自身 property 的响应性，但不执行嵌套对象的深层响应式转换 (深层还是原生对象)。</li></ul></li><li><p><strong>shallowReadonly</strong></p><ul><li>创建一个 proxy，使其自身的 property 为只读，但不执行嵌套对象的深度只读转换（深层还是可读、可写的）。</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="ref其他的api"><strong>ref其他的API</strong><a class="hash-link" href="#ref其他的api" title="Direct link to heading">​</a></h3><ul><li><p><strong>unref</strong></p><ul><li>如果我们想要<strong>获取一个ref引用中的value</strong>，那么也可以<strong>通过unref方法</strong>：</li><li>如果参数是一个 ref，则返回内部值，否则返回参数本身；</li><li>这是 val = isRef(val) ? val.value : val 的语法糖函数；</li></ul></li><li><p><strong>isRef</strong></p><ul><li>判断值是否是一个ref对象。</li></ul></li><li><p><strong>shallowRef </strong></p><ul><li>创建一个浅层的ref对象； </li></ul></li><li><p><strong>triggerRef</strong> </p><ul><li>手动触发和 shallowRef 相关联的副作用： </li></ul></li></ul><p><img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.029-57ff515ea145b846bec0a7039664112b.png" width="429" height="216" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="torefs"><strong>toRefs</strong><a class="hash-link" href="#torefs" title="Direct link to heading">​</a></h2><ul><li>如果我们使用<strong>ES6的解构语法</strong>，对<strong>reactive返回的对象进行解构获取值</strong>，那么之后无论是<strong>修改结构后的变量</strong>，还是<strong>修改reactive 返回的state对象</strong>，<strong>数据都不再是响应式</strong>的：</li></ul><p><img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.026-8383454a4238f6cfe1250ad6973f257d.png" width="453" height="212" class="img_E7b_"></p><ul><li>那么有没有办法<strong>让我们解构出来的属性是响应式</strong>的呢？<ul><li>Vue为我们提供了一个toRefs的函数，可以将reactive返回的对象中的属性都转成ref；</li><li>那么我们再次进行结构出来的 name 和 age 本身都是 ref的；</li></ul></li></ul><p><img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.027-2e8fe1701fc207fa57aae1cfc585ae4f.png" width="581" height="63" class="img_E7b_"></p><ul><li>这种做法相当于已经在state.name和ref.value之间建立了 链接，任何一个修改都会引起另外一个变化；</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="toref"><strong>toRef</strong><a class="hash-link" href="#toref" title="Direct link to heading">​</a></h2><ul><li>如果我们只希望转换一个<strong>reactive对象中的属性为ref</strong>, 那么可以<strong>使用toRef的方法</strong>：</li></ul><p><img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.028-55ca9acf595ba3ebf73da4d3ae8561c6.png" width="776" height="130" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="setup不可以使用this"><strong>setup不可以使用this</strong><a class="hash-link" href="#setup不可以使用this" title="Direct link to heading">​</a></h2><ul><li><p>setup() 之前组件实例就已经创建了，看源码可以看出来，不能用this只是因为setup函数根本没有进行this的绑定，所以才不能用this吧</p><ul><li><p>在阅读源码的过程中，代码是按照如下顺序执行的：</p><ul><li><p>调用 createComponentInstance 创建组件实例； </p></li><li><p>调用 setupComponent 初始化component内部的操 作； </p></li><li><p>调用 setupStatefulComponent 初始化有状态的组 件； </p></li><li><p>在 setupStatefulComponent 取出了 setup 函数； </p></li><li><p>通过callWithErrorHandling 的函数执行 setup； </p></li><li><p>从上面的代码我们可以看出， <strong>组件的instance肯定是在 执行 setup 函数之前就创建出来</strong>的。 </p></li></ul></li></ul></li></ul><p>  <img loading="lazy" src="/FED-DOC/assets/images/Aspose.Words.58cd555b-0278-4c1b-a3eb-d2a42d8c9534.032-cd6fc4b602125126417e02b7f19317b7.jpeg" width="594" height="452" class="img_E7b_"></p><h2></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Guing/FED-DOC/docs/19-体系/codewhy前端体系/06_Vue3全家桶实战/10_Vue3-Composition-API（一）.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/组件化-额外知识补充"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">组件化-额外知识补充</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/FED-DOC/docs/体系/codewhy前端体系/Vue3全家桶实战/Vue3-Composition-API（二）"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Vue3-Composition-API（二）</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a><ul><li><a href="#01-认识组合api" class="table-of-contents__link toc-highlight">0.1. 认识组合API</a></li><li><a href="#02-组合api实现计数器案例" class="table-of-contents__link toc-highlight">0.2. 组合API实现计数器案例</a></li><li><a href="#11-使用reactive定义响应式数据" class="table-of-contents__link toc-highlight">1.1. 使用reactive定义响应式数据</a></li><li><a href="#12-使用ref定义响应式数据" class="table-of-contents__link toc-highlight">1.2. 使用ref定义响应式数据</a></li><li><a href="#13-开发中选择reactiveref" class="table-of-contents__link toc-highlight">1.3. 开发中选择reactive/ref</a></li><li><a href="#14-readonly的使用" class="table-of-contents__link toc-highlight">1.4. readonly的使用</a></li><li><a href="#15-reactive函数补充" class="table-of-contents__link toc-highlight">1.5. reactive函数补充</a></li><li><a href="#16-ref函数补充" class="table-of-contents__link toc-highlight">1.6. ref函数补充</a></li><li><a href="#17-setup中不能使用this" class="table-of-contents__link toc-highlight">1.7. setup中不能使用this</a></li></ul></li><li><a href="#options-api的弊端" class="table-of-contents__link toc-highlight"><strong>Options API的弊端</strong></a></li><li><a href="#认识composition-api" class="table-of-contents__link toc-highlight"><strong>认识Composition API</strong></a></li><li><a href="#setup函数的基本使用" class="table-of-contents__link toc-highlight">Setup函数的基本使用</a><ul><li><a href="#setup函数的参数" class="table-of-contents__link toc-highlight"><strong>setup函数的参数</strong></a></li><li><a href="#setup函数的返回值" class="table-of-contents__link toc-highlight"><strong>setup函数的返回值</strong></a></li></ul></li><li><a href="#setup定义数据" class="table-of-contents__link toc-highlight">Setup定义数据</a><ul><li><a href="#reactive-api" class="table-of-contents__link toc-highlight"><strong>Reactive API</strong></a></li><li><a href="#ref-api" class="table-of-contents__link toc-highlight"><strong>Ref API</strong></a></li><li><a href="#ref自动解包" class="table-of-contents__link toc-highlight"><strong>Ref自动解包</strong></a></li><li><a href="#认识readonly" class="table-of-contents__link toc-highlight"><strong>认识readonly</strong></a></li><li><a href="#readonly的使用" class="table-of-contents__link toc-highlight"><strong>readonly的使用</strong></a></li><li><a href="#readonly的应用" class="table-of-contents__link toc-highlight"><strong>readonly的应用</strong></a></li></ul></li><li><a href="#响应式数据的其他api" class="table-of-contents__link toc-highlight">响应式数据的其他API</a><ul><li><a href="#reactive判断的api" class="table-of-contents__link toc-highlight"><strong>Reactive判断的API</strong></a></li><li><a href="#ref其他的api" class="table-of-contents__link toc-highlight"><strong>ref其他的API</strong></a></li></ul></li><li><a href="#torefs" class="table-of-contents__link toc-highlight"><strong>toRefs</strong></a></li><li><a href="#toref" class="table-of-contents__link toc-highlight"><strong>toRef</strong></a></li><li><a href="#setup不可以使用this" class="table-of-contents__link toc-highlight"><strong>setup不可以使用this</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/FED-DOC/docs/intro">前端</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Guing" target="_blank" rel="noopener noreferrer" class="footer__link-item">关于我<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/FED-DOC/blog">博客</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 FED-DOCS, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/FED-DOC/assets/js/runtime~main.65cec0f1.js"></script>
<script src="/FED-DOC/assets/js/main.4ec18485.js"></script>
</body>
</html>