<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-小程序/小程序性能优化实践/总结">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/FED-DOC/blog/rss.xml" title="IT学习笔记 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/FED-DOC/blog/atom.xml" title="IT学习笔记 Atom Feed"><title data-rh="true">总结 | IT学习笔记</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://guing.github.io/FED-DOC/docs/小程序/小程序性能优化实践/总结"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="总结 | IT学习笔记"><meta data-rh="true" name="description" content="启动优化"><meta data-rh="true" property="og:description" content="启动优化"><link data-rh="true" rel="icon" href="/FED-DOC/img/my.jpg"><link data-rh="true" rel="canonical" href="https://guing.github.io/FED-DOC/docs/小程序/小程序性能优化实践/总结"><link data-rh="true" rel="alternate" href="https://guing.github.io/FED-DOC/docs/小程序/小程序性能优化实践/总结" hreflang="en"><link data-rh="true" rel="alternate" href="https://guing.github.io/FED-DOC/docs/小程序/小程序性能优化实践/总结" hreflang="x-default"><link rel="stylesheet" href="/FED-DOC/assets/css/styles.5627add0.css">
<link rel="preload" href="/FED-DOC/assets/js/runtime~main.4ec65a17.js" as="script">
<link rel="preload" href="/FED-DOC/assets/js/main.4ec18485.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/FED-DOC/"><div class="navbar__logo"><img src="/FED-DOC/img/my.jpg" alt="IT学习笔记" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/FED-DOC/img/my.jpg" alt="IT学习笔记" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">IT学习笔记</b></a><a class="navbar__item navbar__link navbar__link--active" href="/FED-DOC/docs/intro">前端</a><a class="navbar__item navbar__link" href="/FED-DOC/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Guing/FED-DOC" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/FED-DOC/docs/intro">前端学习笔记</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Html/MDN笔记/">Html</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Css/2021必修 CSS架构系统精讲/2-3 CSS设计模式/note">Css</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Vue/Nuxt-前端老张/笔记">Vue</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/React/React17系统精讲结合TS打造旅游电商平台2021/笔记/">React</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Nodejs/intro">Nodejs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/TypeScript/Typescript入门学习笔记/">TypeScript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/FED-DOC/docs/小程序/codewhy前端体系-小程序/总结">小程序</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/FED-DOC/docs/小程序/codewhy前端体系-小程序/总结">codewhy前端体系-小程序</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/FED-DOC/docs/小程序/intro">intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/FED-DOC/docs/小程序/小程序性能优化实践/总结">小程序性能优化实践</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/FED-DOC/docs/小程序/小程序性能优化实践/总结">总结</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/浏览器/IndexedDB数据库/IndexedDB使用">浏览器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/性能优化/vue-cli优化">性能优化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/网络协议/intro">网络协议</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/工程化/intro">工程化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/单元测试/intro">单元测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/构建工具/webpack基础使用">构建工具</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/安全/intro">安全</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/算法/300分钟搞定数据结构与算法/">算法</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/移动端/intro">移动端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/体系/codewhy前端体系/HTML与CSS/整体大纲">体系</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/面试/webpack面试题/">面试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/FED-DOC/docs/Go/资深go开发工程师/基础">Go</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/FED-DOC/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">小程序</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">小程序性能优化实践</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">总结</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>总结</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="启动优化">启动优化<a class="hash-link" href="#启动优化" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="骨架屏">骨架屏<a class="hash-link" href="#骨架屏" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="是什么">是什么<a class="hash-link" href="#是什么" title="Direct link to heading">​</a></h4><ul><li>骨架屏是页面的一个空白版本，通常会在页面完全渲染之前，通过一些灰色的区块大致勾勒出轮廓，待数据加载完成后，再替换成真实的内容.</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="为什么">为什么<a class="hash-link" href="#为什么" title="Direct link to heading">​</a></h4><ul><li>骨架屏在这个页面白屏的时候，它给了用户及时的反馈，减缓了用户焦急等待的一个情绪，这是它的意义所在。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="怎么用">怎么用<a class="hash-link" href="#怎么用" title="Direct link to heading">​</a></h4><ul><li>在微信开发者工具，点击右下角，点击生成骨架屏，会生成一个wxml和一个wxss页面。</li><li>开发者可以在page.onload拉取数据加载之前，使用骨架屏和Loading提示，在这个数据完成之后将骨架屏和Loading做不渲染的一个处理，再展示真正的一个页面内容。</li><li>可在 project.config.json 增加字段 skeletonConfig 进行骨架屏相关配置，页面配置会覆盖掉全局配置。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="优缺点">优缺点<a class="hash-link" href="#优缺点" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="优点">优点<a class="hash-link" href="#优点" title="Direct link to heading">​</a></h5><ul><li>骨架屏在这个页面白屏的时候，它给了用户及时的反馈，减缓了用户焦急等待的一个情绪</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="缺点">缺点<a class="hash-link" href="#缺点" title="Direct link to heading">​</a></h5><ul><li>从渲染效率上来讲，骨架屏它并不能使首屏渲染加快。由于骨架屏的一些使用又向用户渲染了额外的一些内容，这些内容是额外添加的、本来是不需要渲染的，它反而从整体上加长了首屏渲染的一个时长。</li><li>不要过度去使用骨架屏。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="参考文档">参考文档<a class="hash-link" href="#参考文档" title="Direct link to heading">​</a></h4><ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/skeleton.html" target="_blank" rel="noopener noreferrer">骨架屏</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="按需注入">按需注入<a class="hash-link" href="#按需注入" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="是什么-1">是什么<a class="hash-link" href="#是什么-1" title="Direct link to heading">​</a></h4><ul><li>程序提供了懒加载机制，允许首屏渲染之前按需注入仅这个首屏运行所需要的一个代码，其他的代码可以在稍后用到的时候再加载和注入</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="为什么-1">为什么<a class="hash-link" href="#为什么-1" title="Direct link to heading">​</a></h4><ul><li>代码注入在小程序冷启动中是不可或缺的，只有逻辑层和视图层代码全部注入，并且时间点对齐以后才会开始第三阶段首屏渲染的工作。如果这个小程序的这个代码它很大、代码很复杂，又或者用户的设备是低端机，性能不太好，这一阶段便会显著影响启动性能。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="怎么用-1">怎么用<a class="hash-link" href="#怎么用-1" title="Direct link to heading">​</a></h4><ul><li>启动按需注入只需要在app.json配置文件里面添加一个lazyCodeLoading的配置</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="优缺点-1">优缺点<a class="hash-link" href="#优缺点-1" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="优点-1">优点<a class="hash-link" href="#优点-1" title="Direct link to heading">​</a></h5><ul><li>可以优化代码注入环节的耗时和内存占用</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="缺点-1">缺点<a class="hash-link" href="#缺点-1" title="Direct link to heading">​</a></h5><ul><li>如果这个页面本身它比较复杂，用到了很多自定义的组件，这些自定义组件在开启按需注入这种模式以后仍然是会加载的，如果我们想进一步减少这个首屏需要注入的代码，可以在启用按需注入以后同时启用占位组件</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="参考文档-1">参考文档<a class="hash-link" href="#参考文档-1" title="Direct link to heading">​</a></h4><ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/lazyload.html" target="_blank" rel="noopener noreferrer">按需注入和用时注入</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="初始渲染缓存">初始渲染缓存<a class="hash-link" href="#初始渲染缓存" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="是什么-2">是什么<a class="hash-link" href="#是什么-2" title="Direct link to heading">​</a></h4><ul><li>初始渲染缓存，可以使视图层不需要等待逻辑层初始化完毕，而直接提前将页面初始 data 的渲染结果展示给用户。</li><li>工作原理<ul><li>在小程序页面第一次被打开后，将页面初始数据渲染结果记录下来，写入一个持久化的缓存区域（缓存可长时间保留，但可能因为小程序更新、基础库更新、储存空间回收等原因被清除）；</li><li>在这个页面被第二次打开时，检查缓存中是否还存有这个页面上一次初始数据的渲染结果，如果有，就直接将渲染结果展示出来；</li><li>如果展示了缓存中的渲染结果，这个页面暂时还不能响应用户事件，等到逻辑层初始化完毕后才能响应用户事件。</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="为什么-2">为什么<a class="hash-link" href="#为什么-2" title="Direct link to heading">​</a></h4><ul><li>在启动页面时，尤其是小程序冷启动、进入第一个页面时，逻辑层初始化的时间较长。在页面初始化过程中，用户将看到小程序的标准载入画面或可能看到轻微的白屏现象。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="怎么用-2">怎么用<a class="hash-link" href="#怎么用-2" title="Direct link to heading">​</a></h4><ul><li>静态初始渲染缓存<ul><li>在页面或app的json文件中添加配置项 &quot;initialRenderingCache&quot;: &quot;static&quot;</li><li>只包含页面初始data的渲染结果，即页面的纯静态成分</li></ul></li><li>动态初始渲染缓存<ul><li>在页面或app的json文件中添加配置项 &quot;initialRenderingCache&quot;: &quot;dynamic&quot;</li><li>在页面中调用 this.setInitialRenderingCache(dynamicData) 才能启用</li><li>缓存可以包含setData等动态内容，</li><li>this.setInitialRenderingCache 调用时机不能早于 Page 的 onReady 或 Component 的 ready 生命周期，否则可能对性能有负面影响</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="优缺点-2">优缺点<a class="hash-link" href="#优缺点-2" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="优点-2">优点<a class="hash-link" href="#优点-2" title="Direct link to heading">​</a></h5><ul><li>快速展示出页面中永远不会变的部分，如导航栏；</li><li>预先展示一个骨架页，提升用户体验</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="缺点-2">缺点<a class="hash-link" href="#缺点-2" title="Direct link to heading">​</a></h5><ul><li>在初始渲染缓存阶段中，复杂组件不能被展示或不能响应交互。</li><li>缓存的页面它是无法响应用户的交互事件的</li><li>目前支持的内置组件<code>&lt;view /&gt; &lt;text /&gt; &lt;button /&gt; &lt;image /&gt; &lt;scroll-view /&gt; &lt;rich-text /&gt;</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="参考文档-2">参考文档<a class="hash-link" href="#参考文档-2" title="Direct link to heading">​</a></h4><ul><li><p><a href="https://developers.weixin.qq.com/community/business/doc/000a2657c989e82afcfd720285600d" target="_blank" rel="noopener noreferrer">代码按需注入与初始渲染缓存</a></p></li><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/initial-rendering-cache.html" target="_blank" rel="noopener noreferrer">初始渲染缓存</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="初始渲染缓存与骨架屏区别">初始渲染缓存与骨架屏区别<a class="hash-link" href="#初始渲染缓存与骨架屏区别" title="Direct link to heading">​</a></h3><ul><li>初始渲染缓存只适合这个页面节点数量比较少、比较简单、内容不经常变化、用户又经常访问同时wxml节点的结构又非常简单的这样的一些入口页面去使用。</li><li>初始渲染缓存与骨架屏是同一种优化策略，本质上它们都是以空间换时间，只不过是两个不同方向的一个优化</li><li>一般而言我们用了骨架屏以后就不要再使用初始渲染缓存了</li><li>用于提供导航功能的一个首页或者是二级页面，一般适合使用初始渲染缓存</li><li>这个页面经常变化的时候，它时效性较高的动态详情页面，这种页面它适合使用骨架屏</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="分包加载">分包加载<a class="hash-link" href="#分包加载" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="是什么-3">是什么<a class="hash-link" href="#是什么-3" title="Direct link to heading">​</a></h4><ul><li>分包：将小程序划分成不同的子包，在构建时打包成不同的分包，用户在使用时按需进行加载。</li><li>独立分包：是小程序中一种特殊类型的分包，可以独立于主包和其他分包运行。从独立分包中页面进入小程序时，不需要下载主包。当用户进入普通分包或主包内页面时，主包才会被下载。</li><li>分包预下载：在进入小程序某个页面时，由框架自动预下载可能需要的分包，提升进入后续分包页面时的启动速度</li><li>分包异步化：除了非独立分包可以依赖主包外，分包之间不能互相使用自定义组件或进行 require。「分包异步化」特性将允许通过一些配置和新的接口，使部分跨分包的内容可以等待下载后异步使用，从而一定程度上解决这个限制。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="为什么-3">为什么<a class="hash-link" href="#为什么-3" title="Direct link to heading">​</a></h4><ul><li>对小程序进行分包，可以优化小程序首次启动的下载时间，以及在多团队共同开发时可以更好的解耦协作。</li><li>目前小程序分包大小有以下限制：<ul><li>整个小程序所有分包大小不超过 20M</li><li>单个分包/主包大小不能超过 2M</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="怎么用-3">怎么用<a class="hash-link" href="#怎么用-3" title="Direct link to heading">​</a></h4><ul><li>主包一般情况下只放一个首页以及基础的不能再基础不能再删减的内容，像其他的这些页面其他的这些自定义组件，在分包实践里面完全可以移到分包里面去。</li><li>对于准备在微信中分享的相对独立的页面，准备在分享传播的这些页面适合定义为独立分包，独立分包有返回主页的按钮，一般我们在独立分包里面设置对主包的一个分包预下载</li><li>使用分包：<ul><li>在<code>app.json</code>中<code>subpackages</code>字段声明项目分包结构</li></ul></li><li>独立分包：<ul><li>在<code>app.json</code>的<code>subpackages</code>字段中对应的分包配置项中定义<code>independent</code>字段声明对应分包为独立分包</li></ul></li><li>分包预下载：<ul><li>通过在<code>app.json</code>增加<code>preloadRule</code>配置来控制。</li></ul></li><li>分包异步化:<ul><li>组件<ul><li>通过为其他分包的自定义组件设置 占位组件，我们可以先渲染占位组件作为替代，在分包下载完成后再进行替换</li><li>通过在页面的json文件增加<code>componentPlaceholder</code>配置来实现占位组件。</li></ul></li><li>js代码<ul><li>一个分包中的代码引用其它分包的代码时，为了不让下载阻塞代码运行，我们需要异步获取引用的结果</li><li>使用<code>require</code>或才<code>require.async</code>异步调用</li></ul></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="优缺点-3">优缺点<a class="hash-link" href="#优缺点-3" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="优点-3">优点<a class="hash-link" href="#优点-3" title="Direct link to heading">​</a></h5><ul><li>对小程序进行分包，可以优化小程序首次启动的下载时间，以及在多团队共同开发时可以更好的解耦协作。</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="缺点-3">缺点<a class="hash-link" href="#缺点-3" title="Direct link to heading">​</a></h5><ul><li>使用分包会有各种限制。</li><li>使用分包：<ul><li>tabBar 页面必须在主包内</li><li>subpackage不能嵌套</li><li>packageA 无法使用 packageB 的资源，但可以使用主包、packageA 内的资源</li></ul></li><li>独立分包：<ul><li>独立分包中不能依赖主包和其他分包中的内容，包括 js 文件、template、wxss、自定义组件、插件等</li><li>主包中的<code>app.wxss</code>对独立分包无效，应避免在独立分包页面中使用<code>app.wxss</code>中的样式；</li><li>App 只能在主包内定义，独立分包中不能定义 App，会造成无法预期的行为</li><li>独立分包中暂时不支持使用插件</li><li>与普通分包不同，独立分包运行时，App 并不一定被注册，因此 getApp() 也不一定可以获得 App 对象</li><li>当从独立分包启动小程序时，主包中 App 的 onLaunch 和首次 onShow 会在从独立分包页面首次进入主包或其他普通分包页面时调用</li><li>由于独立分包中无法定义 App，小程序生命周期的监听可以使用 wx.onAppShow，wx.onAppHide 完成。App 上的其他事件可以使用 wx.onError，wx.onPageNotFound 监听。</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="参考文档-3">参考文档<a class="hash-link" href="#参考文档-3" title="Direct link to heading">​</a></h4><ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html" target="_blank" rel="noopener noreferrer">分包加载</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="运行时优化">运行时优化<a class="hash-link" href="#运行时优化" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="使用虚拟dom优化长列表显示">使用虚拟dom，优化长列表显示<a class="hash-link" href="#使用虚拟dom优化长列表显示" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="是什么-4">是什么<a class="hash-link" href="#是什么-4" title="Direct link to heading">​</a></h4><ul><li>一个使用虚拟滚动的组件，用来优化长列表内容的渲染.在渲染的时候仅会渲染用户当前在这个视图里面应该看到的内容，对于看不到的内容则不会渲染，使用这个组件不仅可以加速首屏渲染的一个速度，还可以让运行时的列表滑动浏览更加的流畅。</li><li><a href="https://developers.weixin.qq.com/community/business/doc/000266b8e1c8c01ccddd872485100d" target="_blank" rel="noopener noreferrer">文档链接</a></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="为什么-4">为什么<a class="hash-link" href="#为什么-4" title="Direct link to heading">​</a></h4><ul><li>电商小程序往往需要展示很多商品，当一个页面展示很多的商品信息的时候，会造成小程序页面的卡顿以及白屏。原因有如下几点：<ul><li>商品列表数据很大，首次 setData 的时候耗时高</li><li>渲染出来的商品列表 DOM 结构多，每次 setData 都需要创建新的虚拟树、和旧树 diff 操作耗时都比较高</li><li>渲染出来的商品列表 DOM 结构多，占用的内存高，造成页面被系统回收的概率变大。</li></ul></li><li>因此实现长列表组件来解决这些问题。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="怎么用-4">怎么用<a class="hash-link" href="#怎么用-4" title="Direct link to heading">​</a></h4><ul><li>安装组件</li><li>在页面的 json 配置文件中添加 recycle-view 和 recycle-item 自定义组件的配置</li><li>WXML 文件中引用 recycle-view</li><li>页面 JS 管理 recycle-view 的数据</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="优缺点-4">优缺点<a class="hash-link" href="#优缺点-4" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="优点-4">优点<a class="hash-link" href="#优点-4" title="Direct link to heading">​</a></h5><ul><li>明显地减少小程序页面的卡顿以及白屏</li><li>很好地实现虚拟DOM这样的一个优化思想</li><li>本身已经开启了throttle函数节流限制，减少不必要的 多余的CPU浪费 资源消耗</li><li>预留了插槽。我们可以看到它有before以及after slot方便开发者添加个性的业务逻辑</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="缺点-4">缺点<a class="hash-link" href="#缺点-4" title="Direct link to heading">​</a></h5><ul><li>首先对于 view 和 item 的结构是清晰的，但是对于数据需要手动通过 ctx.append 进行追加，而且对于整个 recycle-view 和 recycle-item 的处理逻辑是要和业务层耦合在一起的，这种方式对于小程序的开发者有一定技术熟练度的要求。</li><li>必须设置每个item的宽度和高度</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="其他文档">其他文档<a class="hash-link" href="#其他文档" title="Direct link to heading">​</a></h4><p><a href="https://zhuanlan.zhihu.com/p/540177682" target="_blank" rel="noopener noreferrer">小程序长列表优化实践</a></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="优化重渲染">优化重渲染<a class="hash-link" href="#优化重渲染" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="是什么-5">是什么<a class="hash-link" href="#是什么-5" title="Direct link to heading">​</a></h4><ul><li>视图如果需要改变，需要逻辑层通过setData方法、改变视图上面绑定的数据。当数据发生变化的时候，小程序会将原数据与新数据进行结合，拿到一个新的节点树并拿新的节点树与的原节点树进行一个差异比较，以此来获得哪些节点的属性需要更新、哪些节点需要添加或者是移除等等这些信息</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="为什么-5">为什么<a class="hash-link" href="#为什么-5" title="Direct link to heading">​</a></h4><ul><li>从渲染机制我们可以看出来每次通过setData传递数据，它不仅受到底层传输通道窄小的限制，它还受到设备渲染能力的一个限制。这个数据越大节点越多越复杂。它渲染也就越慢，而渲染一慢在用户侧看来它表现起来就是卡顿 操作反馈不及时。</li><li>我们可以将这个界面功能进行组件化处理，将频繁变化的数据封装在一个个的单独的组件里边，同时去掉一些不必要的数据设置，减少每次setData传递的一个数据量，也可以提升这个视图的渲染效率</li><li>还有通过wxs脚本改写组件，让可以在这个视图层里面完成的代码逻辑，就在这个视图层里面进行完成。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="怎么用-5">怎么用<a class="hash-link" href="#怎么用-5" title="Direct link to heading">​</a></h4><ul><li>组件化</li><li>在wxs脚本与逻辑层需要相互调用<ul><li>在wxs脚本里面可以通过ownerInstance的callMethod方法去调用这个页面上的方法</li><li>逻辑层怎么样去调用wxs脚本里面的方法，我们可以通过视图层上绑定一个名称，为change:xxx这样的一个特别属性，触发对wxs脚本的里面的方法的一个调用</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="优缺点-5">优缺点<a class="hash-link" href="#优缺点-5" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="优点-5">优点<a class="hash-link" href="#优点-5" title="Direct link to heading">​</a></h5><ul><li>组件化：减少重绘制的范围，优化setData数据量大小。</li><li>wxs优化：减少通信的次数，让事件在视图层（Webview）响应</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="缺点-5">缺点<a class="hash-link" href="#缺点-5" title="Direct link to heading">​</a></h5><ul><li>将一些业务逻辑放在wxs脚本执行，能加快一点执行时间，但是不多。在wxs中还是要通过setData去更新视图，主要时间还是setData时间上。</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="其他文档-1">其他文档<a class="hash-link" href="#其他文档-1" title="Direct link to heading">​</a></h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html" target="_blank" rel="noopener noreferrer">WXS响应事件</a>
<!-- -->[重渲染与自定义组件优化]<a href="https://developers.weixin.qq.com/community/business/doc/0000cecf3b87d0edc0dd311025680d" target="_blank" rel="noopener noreferrer">https://developers.weixin.qq.com/community/business/doc/0000cecf3b87d0edc0dd311025680d</a></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="wxml代码优化">wxml代码优化<a class="hash-link" href="#wxml代码优化" title="Direct link to heading">​</a></h3><p>以下是优化小程序视图代码的几个小技巧：</p><ol><li>使用 wxml 标签要克制，能不用容器标签就不用，能少用标签就少用标签。</li><li>默认使用 catch 代替 bind 绑定事件，避免没必要的冒泡，自定义的 data 数据属性里边永远只存储基本的数据类型，并且只存储小数据。</li><li>在动态渲染的列表里，一定要绑定一个唯一的 wx:key，静态渲染可以使用 index。</li><li>对于 scroll 高频事件，要节流使用节流函数 throttle。</li><li>对于用户的单击事件，尤其是高频触发的单击事件，可以适当使用防抖函数 debounce。</li></ol><p>优化视图代码，就是优化对 wxml 标签及其属性的一个使用。如果页面足够复杂，标签嵌套足够深，Parse WXML 的过程耗时会很长。wxml 和 wxss 经过解析后才能完成视图层代码注入，如果这个过程很长，会影响冷启动的总时间。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="wxss代码优化">wxss代码优化<a class="hash-link" href="#wxss代码优化" title="Direct link to heading">​</a></h3><ul><li><p>删除无用的样式代码是为了提高wxss样式的命中率，可以使用<code>gulp-cleanwxss</code>插件清除无用的wxss代码</p></li><li><p>某些样式只在分包里使用，不要在主包里引入</p></li><li><p>某个子页面只使用在该页面内定义样式，不要在全局的app.wxss文件中引用</p></li><li><p>某个组件只在组件内定义样式</p></li><li><p>减少公共样式的引入可以提高wxss样式的命中率和小程序启动速度</p></li><li><p>在安卓下默认有惯性滚动，而在iOS下面需要额外设置，添加样式：<code>-webkit-overflow-scrolling:touch</code>，便可以开启惯性滚动了</p></li><li><p>在小程序开发里面使用:active伪类可以实现按钮的单击态效果，但是这种实现存在一个缺点，事件太容易触发，并且滚动态滑动的时候，单击态不容易消失，在一些旧的iOS设备上又容易失效。使用内置的hover-class属性实现单击态</p></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="js代码优化">JS代码优化<a class="hash-link" href="#js代码优化" title="Direct link to heading">​</a></h3><ul><li>定时器在离开页面时一定要及时销毁，否则可能导致内存泄漏。</li><li>全局监听事件使用时要注意及时添加和移除监听，以避免无效页面被异步线程引用。比如使用wx.onXxx等事件</li><li>使用全局对象时要注意及时清理，如自定义的类对象需要实现dispose方法，在释放对象时先调用dispose方法，再从全局对象上删除。</li><li>使用this对象时需要特别谨慎，尤其是在周期性发生的异步回调函数中，绑定的this对象不是一个简单的对象，需要进行优化。</li><li>引用类型的变量尤其是不断增长的临时变量，不要被全局对象或异步线程对象引用或间接引用，在使用完成后要及时进行清理。</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="setdata优化技巧">setData优化技巧<a class="hash-link" href="#setdata优化技巧" title="Direct link to heading">​</a></h3><ul><li>不要多次分开调用setData，尽量要合并调用</li><li>不准备渲染的数据不要放在data数据对象里边</li><li>使用索引法进行局部更新长列表数据，例如将<code>this.setData({list:list})</code>，替换为<code>this.setData({&#x27;list[i].open&#x27;:true})</code></li><li>当小程序进入后台状态的时候，会有5秒的一个暂停状态，这时小程序的代码仍然是可以运行的。这里应该禁止用setData方法，可以通过对象劫持的方法，去禁用setData方法。<a href="https://developers.weixin.qq.com/community/business/doc/00062a56c08d505bf8fdcc60d5640d" target="_blank" rel="noopener noreferrer">参考文档</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="网络请求优化">网络请求优化<a class="hash-link" href="#网络请求优化" title="Direct link to heading">​</a></h3><ul><li>减少不必要的网络请求，使用本地缓存的数据代替从后端接口拉取的数据。先使用本地缓存加载数据，接着再去拉取接口数据，如果接口数据有更新再更新缓存</li><li>优化网络请求的并发数，让优先级高的请求先执行。小程序默认的最大请求数是10个，可以通过使用<code>priority-async-queue</code>的npm包来设置请求的优先级。</li><li>优化网络请求参数，提高网络请求的通讯效率。wx.request是微信小程序，向后端发起网络请求的接口已经提供了一些优化参数<ul><li>enableCache是缓存内容，相同请求它优先读取本地的内容 这个参数是可以开启的</li><li>enableHttp2 这个参数是尝试使用HTTP2协议，如果这个后端服务器支持的话，这个参数也可以开启</li><li>enableQuic，这是尝试使用Quic协议，Quic是被称为第三代网络协议，它拥有更好的网络传输性能，这个参数也可以开启</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="图片优化">图片优化<a class="hash-link" href="#图片优化" title="Direct link to heading">​</a></h3><ul><li>尽量减少图片的请求次数，小图片可以使用雪碧图。</li><li>尽量压缩图片的大小</li><li>尽量使用带有CDN加速的网络图片链接</li><li>尽可能使用高压缩比的图片，例如webp格式的图片</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="其他代码优化技巧">其他代码优化技巧<a class="hash-link" href="#其他代码优化技巧" title="Direct link to heading">​</a></h3><ul><li>将拉取接口数据的时机，尽量提前，可以放在app.onLoad中去，然后通过异步数据订阅的机制，在page.onload中去执行异步结果。<a href="https://developers.weixin.qq.com/community/business/doc/000a0e126dc4189bf4fd522e75100d" target="_blank" rel="noopener noreferrer">参考文档</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="总结">总结<a class="hash-link" href="#总结" title="Direct link to heading">​</a></h2><p>以上优化富有一些创造性</p><ul><li><strong>第一点</strong>，使用异步转同步编程范式，结合立即执行函数，在保证代码清晰性，可阅读性的前提之下提高主线程的执行效率。</li><li><strong>第二点</strong>，将优先级自动排序的列队应用于网络请求当中提高网络操作的执行效率。</li><li><strong>第三点</strong>，使用串发复合指令，在多个文件里面延迟非重要同步代码的执行。</li><li><strong>第四点</strong>，使用并发复合指令，在多个文件中对齐代码执行点，使用竞赛模式基于多种渠道竞相拉取主页数据。</li></ul><p>在优化策略上，整体来讲大体可以分为两类。</p><ul><li>第一类以空间换时间，例如数据预拉取，周期性更新，初始渲染缓存，使用LocalStorage缓存接口等等这些技巧，都属于以空间换时间的技巧。</li><li>第二类以时间换空间，例如使用虚拟DOM，使用长列表组件，这一类都是属于以时间换空间的优化技巧</li><li>本质上精神都是一致的。精神就是现人现地，立足小程序的启动流程，双线程运行机制和重渲染机制，具体项目具体分析，以一个字节，一个字节去抠，一个毫秒，一个毫秒去节省的细致精神，一点点进行优化。在这个地方抠下了一点，在那个地方省下了一点，整体上性能就提升了。</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Guing/FED-DOC/docs/9-小程序/小程序性能优化实践/总结.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/FED-DOC/docs/小程序/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">intro</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/FED-DOC/docs/浏览器/IndexedDB数据库/IndexedDB使用"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">IndexedDB使用与出坑指南</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#启动优化" class="table-of-contents__link toc-highlight">启动优化</a><ul><li><a href="#骨架屏" class="table-of-contents__link toc-highlight">骨架屏</a></li><li><a href="#按需注入" class="table-of-contents__link toc-highlight">按需注入</a></li><li><a href="#初始渲染缓存" class="table-of-contents__link toc-highlight">初始渲染缓存</a></li><li><a href="#初始渲染缓存与骨架屏区别" class="table-of-contents__link toc-highlight">初始渲染缓存与骨架屏区别</a></li><li><a href="#分包加载" class="table-of-contents__link toc-highlight">分包加载</a></li></ul></li><li><a href="#运行时优化" class="table-of-contents__link toc-highlight">运行时优化</a><ul><li><a href="#使用虚拟dom优化长列表显示" class="table-of-contents__link toc-highlight">使用虚拟dom，优化长列表显示</a></li><li><a href="#优化重渲染" class="table-of-contents__link toc-highlight">优化重渲染</a></li><li><a href="#wxml代码优化" class="table-of-contents__link toc-highlight">wxml代码优化</a></li><li><a href="#wxss代码优化" class="table-of-contents__link toc-highlight">wxss代码优化</a></li><li><a href="#js代码优化" class="table-of-contents__link toc-highlight">JS代码优化</a></li><li><a href="#setdata优化技巧" class="table-of-contents__link toc-highlight">setData优化技巧</a></li><li><a href="#网络请求优化" class="table-of-contents__link toc-highlight">网络请求优化</a></li><li><a href="#图片优化" class="table-of-contents__link toc-highlight">图片优化</a></li><li><a href="#其他代码优化技巧" class="table-of-contents__link toc-highlight">其他代码优化技巧</a></li></ul></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/FED-DOC/docs/intro">前端</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Guing" target="_blank" rel="noopener noreferrer" class="footer__link-item">关于我<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/FED-DOC/blog">博客</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 FED-DOCS, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/FED-DOC/assets/js/runtime~main.4ec65a17.js"></script>
<script src="/FED-DOC/assets/js/main.4ec18485.js"></script>
</body>
</html>