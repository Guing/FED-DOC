# 内容回顾

## 一. 播放页布局

### 1.0. 点击Item跳转





### 1.1. 背景毛玻璃

* image -> 背景
* view -> blur毛玻璃





### 1.2. 自定义导航栏(掌握)





### 1.3. 导航栏标题和页面左右滚动

* Swiper/Swiper-Item 轮播图
* 标题的点击 -> 轮播图的切换





### 1.4. 歌曲页面的布局

* album
* info
* lyric
* progress
* controls





## 二. 歌曲进度的控制

### 2.1. 歌曲播放

* audioContext = wx.createInnerAudioContext()
* src属性
* autoplay





### 2.2. onTimeUpdate

* 改变当前的时间和sliderValue





### 2.3. 监听slider的点击

* bindchange
  * value
  * 计算currentTime
  * seek(currentTime)
  * setData({currentTime, value})





### 2.4. 监听slider的滑动

* bindchanging
  * value
  * currentTime
  * isSliderChanging



### 2.5. seek(time) bug处理

* throttle: 节流控制
  * leading: false
  * trailing: false
* isWaiting: true



### 2.6. 播放和暂停功能





## 三. 歌词的展示

### 3.1. 请求和解析歌词

* 正则表达式





### 3.2. time匹配歌词

* 循环所有的歌词, 找到第一个比当前时间大的一句歌词
  * i - 1
* index: length - 1

* currentLyricText
* currentLyricIndex
  * 性能优化 index === currentLyricIndex return





### 3.3. 歌词的文字匹配思路







### 3.4. 全部歌词的展示

























